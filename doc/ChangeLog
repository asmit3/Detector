#--------------------------------------------------------------------------
# File and Version Information:
#  $Id$
#
# Description:
#  ChangeLog file for package Detector
#------------------------------------------------------------------------

Package author: Mikhail S. Dubrovin

Please describe any modifications that you made to the package in the
reverse time order.

=======

Tag: V00-03-49
2016-03-25 Mikhail S. Dubrovin
- PyDetectorAccess - add methods ndarray_from_image and default_geometry, update ex_all_dets.py
- AreaDetector - add method ndarray_from_image and its test ex_ndarray_from_image
- add examples/ex_ndarray_from_image.py data/geometry-def-epix100a.data
	
Tag: V00-03-48
2016-03-24 Mikhail S. Dubrovin
- AreaDetector - update comments for doc string.

Tag: V00-03-47
2016-03-22 Christopher O'Grady
- fix bug in exception

Tag: V00-03-46
2016-03-21 Christopher O'Grady and TJ Lane
- update doc strings

Tag: V00-03-45
2016-03-17 Mikhail S. Dubrovin
- det_ndarr_raw_proc - fix output file name substitution
- add parameter "addmetad" to save_txt, save_txtnda, save_txtdaq methods. Do not save metadata for CSPAD and CSPAD2x2.
- det_ndarr_average - change default parameters for plotim=False, verbose=False, events=10000000

Tag: V00-03-44
2016-03-15 Mikhail S. Dubrovin
- AreaDetector._shaped_array_ - exclude a bunch of detectors from re-shaping based on calib parameters (PSAS-139)

Tag: V00-03-43
2016-03-15 Christopher O'Grady
- add "name" attribute to detector so users can query the full-name of a detector

Tag: V00-03-42
2016-03-07 Mikhail S. Dubrovin
- app/det_ndarr_average - save max file w/o header for cspad2x2
- app/det_ndarr_raw_proc - make configurable output file names for calibman compatability
- add app/event_keys - for calibman

Tag: V00-03-41
2016-03-05 Mikhail S. Dubrovin
- det_ndarr_average - use det.save_txtnda and det.save_asdaq
	
Tag: V00-03-40
2016-02-25 Mikhail S. Dubrovin
- exteld det_ndarr_raw_proc for case of many sources
	
Tag: V00-03-39
2016-02-24 Mikhail S. Dubrovin
- add AreaDetector.save_asdaq, update examples, app/det_ndarr_raw_proc (PSAS-139)

Tag: V00-03-38
2016-02-22 Mikhail S. Dubrovin
- AreaDetector.py, PyDetectorAccess.py - add methods save_txtnda, load_txtnda (PSAS-139)
- add ex_save_load_nda.py, update ex_all_dets.py

Tag: V00-03-37
2016-02-19 Mikhail S. Dubrovin
- in PyDetectorAccess.py and AreaDetector.py add method point_indexes.
- add ex_andor3d_config.py, update ex_all_dets.py
	
Tag: V00-03-36
2016-02-12 Mikhail S. Dubrovin
- PyDetectorAccess.raw_data_cspad2x2 - hide configuration wornings under pbits (PSAS-139)

Tag: V00-03-35
2016-02-11 Christopher O'Grady
- Remove print statement from ControlDataDetector

Tag: V00-03-34
2016-02-11 Mikhail S. Dubrovin
- PyDetectorAccess - update raw_data_andor, raw_data_cspad2x2 - return data even for roiMask=1 (PSAS-139)
- AreaDetector - do not reshape andor3d ndarray from data

Tag: V00-03-33
2016-02-09 Mikhail S. Dubrovin
- add ex_andor3d.py
	
Tag: V00-03-32
2016-02-08 Mikhail S. Dubrovin
- add support for Andor3d (PSAS-139)
    - PyDataAccess.py - add get_andor_config_object, get_andor_data_object
    - PyDetectorAccess.py - update raw_data_andor, raw_data_pnccd, ex_all_dets.py, GlobalUtils.py
    - DetectorTypes.py - add DualAndor
	
Tag: V00-03-31
2016-02-08 Mikhail S. Dubrovin
- AreaDetector.py - in image() check if nda is None before nda = two2x1ToData2x2(nda) (PSAS-139) 
	
Tag: V00-03-30
2016-01-29 Christopher O'Grady
- Add eventCodes method to evr

Tag: V00-03-29
2016-01-28 Mikhail S. Dubrovin
- add examples/ex_save_mec_cspad*_imges_in_tiff.py (PSAS-211)

Tag: V00-03-28
2016-01-27 Mikhail S. Dubrovin
- AreaDetector.py - use mask_comb in stead of status_as_mask, swap mbits bits 1 and 2 for status and calib (PSAS-139) 

Tag: V00-03-27
2016-01-26 Mikhail S. Dubrovin
- AreaDetector.py - improve raw, add mask_comb, use mask_comb in calib, add ex_cspad2x2_mask_mec.py (PSAS-139)

Tag: V00-03-26
2016-01-22 Mikhail S. Dubrovin
- NDArrProducerStore::Create 
	- add support for QUARTZ4A150, RAYONIX, FCCD as Camera
	- do not throw exception if dettype is unknown, return NULL pointer
- DetectorAccess.cpp - in methods like data_uint16_2 return empty ndarray if m_nda_prod == NULL
	
Tag: V00-03-25
2016-01-21 Mikhail S. Dubrovin
- AreaDetector.py - in status_as_mask do not re-shape cspad2x2 arr, it is already (2,185,388) from status()

Tag: V00-03-24
2016-01-20 Mikhail S. Dubrovin
- AreaDetector.py - in calib change order of corrections; 1) common mode, 2) mask from status (PSAS-139) 
	
Tag: V00-03-23
2016-01-20 Mikhail S. Dubrovin
- AreaDetector.py - fix return from status_as_mask, ex_all_dets.py - update example for det.mask
	
Tag: V00-03-22
2016-01-15 TJ Lane
- Fix issue where aliases were not correctly mapped for non-AreaDetectors

Tag: V00-03-21
2016-01-07 TJ Lane
- Fix typo

Tag: V00-03-20
2016-01-07 TJ Lane
- Added ConfigDataDetector type

Tag: V00-03-19
2016-01-07 Mikhail S. Dubrovin
- PyDetectorAccess.py - fix issue with initialization of self.mbits in constructor (PSAS-139)

Tag: V00-03-18
2016-01-06 Christopher O'Grady
- Refactor the detector factory so people can query the detector
  type for a particular source name.  Add IpimbDetector to DetectorTypes.py
  (for non-bld detectors)

Tag: V00-03-17
2016-01-05 Christopher O'Grady
- Fix EpicsDetector import

Tag: V00-03-16
2015-12-18 TJ Lane
- Added IpimbDetector
- Added explicit list of BldInfo detector types
- modified DdlDetector to have .get() instead of __call__()

Tag: V00-03-15
2015-12-18 Mikhail S. Dubrovin
- PyDetectorAccess.py - add local caching for coords_x,y,z, areas, self.mask_geo, self.pixel_size (PSAS-139)
- add examples/test_geo_time.py
	
Tag: V00-03-14
2015-12-15 Mikhail S. Dubrovin
- AreaDetector.py add returning geometry object method, add ex_cspad_quads_data.py (PSAS-139)

Tag: V00-03-13
2015-12-14 Mikhail S. Dubrovin
- app/det_ndarr_average - evaluate and save ndarray for max value, 
- ex_all_dets.py - add examples for non-complete data of MecTragetChamber
- PyDataAccess.py - add support for Epix.ElementV3 and Epix.Config100aV2 (PSAS-147)
	
Tag: V00-03-12
2015-12-09 Mikhail S. Dubrovin
- PyDetectorAccess.raw_data_cspad - fix cspad ndarray reconstruction in case of missing quads, like in MecTargetChamber.0:Cspad.0 (PSAS-139)
	
Tag: V00-03-11
2015-12-09 Mikhail S. Dubrovin
- in PyDetectorAccess.py, AreaDetector.py rename methods gain_map to gain_mask, inverse results for low/high gain pixels (PSAS-139)

Tag: V00-03-10
2015-12-08 Mikhail S. Dubrovin
- PyDetectorAccess.py, AreaDetector.py - add gain_map evaluation method using configuration (PSAS-139)
- add examples ex_cspad_gain_map.py, expyda_cspad_gain_map.py
	
Tag: V00-03-09
2015-12-04 Mikhail S. Dubrovin
- PyDataAccess, PyDetectorAccess.py, ex_new_dets - add support for Fccd, Timepix, Fli, Pimax (PSAS-139)

Tag: V00-03-08
2015-12-03 Mikhail S. Dubrovin
- add Igor's script app/find_runs_for_data_type
- add data/copy_part_of_xtc_file.cfg
- DetectorAccess - fix memory leak issue (PSAS-139)
	
Tag: V00-03-07
2015-11-17 Mikhail S. Dubrovin
- update documentation for AreaDetector, WFDetector, PyDetector
	
Tag: V00-03-06
2015-11-16 Mikhail S. Dubrovin
- PyDetector - restore and update documentation for sphinx, restore optional test, which were deleted/broken in rev.10938

Tag: V00-03-05
2015-11-13 yoon82 - did something in rev.10977 but did not leave any comments here (M.D.)
	- actually in PyDetector.py portion of code is moved in methods isAreaDetector, isEvrDetector, isWFDetector

Tag: V00-03-04
2015-11-11 Christopher O'Grady
Update detector_factory documentation with Mikhail suggestions.

Tag: V00-03-03
2015-11-11 Mikhail S. Dubrovin
- Update examples/ex_nda_average.py - evaluate maximal along with average

Tag: V00-03-02
2015-11-09 Christopher O'Grady
Update detector_factory documentation.  Clean up GlobalUtils
(alot of this code was moved to PSCalib).

Tag: V00-03-01
2015-11-09 Christopher O'Grady
Make remaining python in examples/ directory work.

Tag: V00-03-00
2015-11-09 TJ Lane
- PyDetector.py: detector_factory() functional, chooses correct PyDetector
from string
- New detectors: DdlDetector.py, EvrDetector.py, EpicsDetector.py and the Bld
(uses DdlDetector)
- No longer accept psana.Source in calls to psana.Detector (v00-03)

Tag: V00-02-05
2015-10-29 Mikhail S. Dubrovin
- AreaDetector.py and PyDetectorAccess.py - in methods indexes_x/y(...) and image(...) add parameter do_update=False (PSAS-139)

Tag: V00-02-04
2015-10-27 Mikhail S. Dubrovin
- PyDetectorAccess.py - improve pixel index arrays caching, update for new run (PSAS-139)

Tag: V00-02-03
2015-10-26 Mikhail S. Dubrovin
- PyDetectorAccess.py - apply cashing of index arrays in indexes_x/y(...) and image(...)
	previously it was done in PSCalib.GeometryAccess after searching of the top object, that takes time (PSAS-139)

Tag: V00-02-02
2015-10-26 Mikhail S. Dubrovin
- AreaDetector.py add protection in image(); return None if det.calib() is None (PSAS-139)

Tag: V00-02-01
2015-10-16 Mikhail S. Dubrovin
- split PyDetector.py in to AreaDetector.py and WFDetector.py, convert PyDetector.py to factory-class (PSAS-139)
- add ex_evt_keys.py, ex_time_fiducials.py

Tag: V00-01-13
2015-10-15 Mikhail S. Dubrovin
- add examples ex_time_fiducials.py, ex_evt_keys.py

Tag: V00-01-12
2015-10-14 Mikhail S. Dubrovin
- Fix crash if detector source is missing in data (PSAS-139)
  - PyDetector.py in _nda_or_none_ - return None if nda is None

Tag: V00-01-11
2015-10-14 Mikhail S. Dubrovin
- Add support for Rayonix (PSAS-139)

Tag: V00-01-10
2015-10-06 Mikhail S. Dubrovin
- Add support for Quartz4A150 (PSAS-139)
  in PyDataAccess.py add get_quartz_data_object(..), get_quartz_config_object(..)
  in PyDetectorAccess.py add QUARTZ4A150 in raw_data(...)
  add ex_quartz.py, update ex_all_dets.py

Tag: V00-01-09
2015-10-01 Christopher O'Grady
- Fix error in autogenerated documentation introduced in V00-01-07:
  change "import _psana" back to "import psana".

Tag: V00-01-08
2015-09-30 David Schneider
- change an abort() call to throw exception to keep user ipython session running

Tag: V00-01-07
2015-09-25 TJ Lane
- Changed import psana to import _psana to break circular dependency in psana
- Tested change in ex_all_dets.py

Tag: V00-01-06
2015-09-23 Mikhail S. Dubrovin
- in PyDetector.py (python interface only) and PyDetectorAccess.py (PSAS-139)
  - add move_geo, tilt_geo, indexes_xy
  - indexes_x, indexes_y, indexes_xy, and image add parameters pix_scale_size_um=None, xy0_off_pix=None

Tag: V00-01-05
2015-09-18 Mikhail S. Dubrovin
- in PyDetector.py - accept source as a string (PSAS-139)

Tag: V00-01-04
2015-09-18 Mikhail S. Dubrovin
- Add support for Imp (PSAS-139)
- in PyDetector.py add set_correct_acqiris_time(...), set_calib_imp(...), __call__(...), update doc
- in PyDetectorAccess.py add raw_data_imp(...), set_calib_imp(...)
- in PyDataAccess.py add get_imp_data_object(...) and get_imp_config_object(...)
- examples/ex_imp.py

Tag: V00-01-03
2015-09-15 Mikhail S. Dubrovin
- PyDetector.set_source fix type to psana.Source, add ex_cspad_alias.py, ex_pnccd_ts.py (PSAS-139)

Tag: V00-01-02
2015-09-11 Mikhail S. Dubrovin
- multiple changes (PSAS-139)
- DetectorAccess - add setCModPars
- PyDetector.py - set custom common mode parameters, return cspad2x2 arrays with shape=(2,185,388) (PSAS-139)
- pyext/pyDetector.cpp - add set_cmod_pars
- examples/ex_all_dets.py
- examples/ex_acqiris.py
- update examples

Tag: V00-01-01
2015-09-09 Mikhail S. Dubrovin
- multiple changes (PSAS-139)
	- add methods (runnum) in addition to (evt,env)
	- add python interface for geometry, intensity calibration constants
	- add switch between C++/Python interfaces
- update/add examples in examples/*

2015-08-24 Mikhail S. Dubrovin
- Add in GlobalUtils add string_from_source_v2 and change PyDetector.py to accept aliases (PSAS-139)

==============

Tag: V00-00-12
2015-08-11 Mikhail S. Dubrovin
- add app/det_ndarr_average and examples/ex_nda_average.py (PSAS-139)

Tag: V00-00-11
2015-08-05 Mikhail S. Dubrovin
- minor extension of examples.

Tag: V00-00-10
2015-07-21 Mikhail S. Dubrovin
- PyDetector.py - add protection and warnings for missing data/pedestal/mask in calib(.) (PSAS-139)
- add ex_cspad2x2_ts.py - access to data using timestamp.

Tag: V00-00-09
2015-07-14 Mikhail S. Dubrovin
- PyDetector.py - change interface to mask(.) as users requested (PSAS-139)

Tag: V00-00-08
2015-07-13 Mikhail S. Dubrovin
- Re-implement mask method to generate combined mask array, rename methods by user's request (PSAS-139)
  - DetectorAccess, pyext/pyDetector.cpp add parameter mbits in method pixel_mask_geo
  - PyDetector.py
	- rename method raw_data -> raw
	- rename method calib_data -> calib
	- rename method mask -> mask_calib
	- rename method print_members -> print_attributes
	- add parameter mbits in method mask_geo
	- add method mask(.)
	- adjust sphinx doc.
  - Add examples/ex_mask.py
  - Adjust other examples for renamed methods.


Tag: V00-00-07
2015-06-22 Mikhail S. Dubrovin
- Add implementation and access to Acqiris through PyDetector.raw_data() (PSAS-139)
  - PyDataAccess.py add get_acqiris_data_object(.) and get_acqiris_config_object(.)
  - PyDetector.py add documentation for Acqiris
  - PyDetectorAccess.py add implementation raw_data_acqiris(.), set_correct_acqiris_time(.), raw_data(.)
  - add examples/ex_acqiris.py

Tag: V00-00-06
2015-06-12 Mikhail S. Dubrovin
- fix sphinx documentation, cosmetic changes.
- set SConscript to generate documentation

Tag: V00-00-05
2015-06-11 Mikhail S. Dubrovin
- extensive development (PSAS-139)
	- add C++/python code for common mode correction
	- add calib_data(...) method to apply 3 corrections (pedestals, pixel status mask, common mode)
	- add protection in many places: return None if returning object is non-available
	- add PyDetectorAccess.py - get all raw data directly from python data objects (it is faster then using boost/python)
        - add PyDataAccess.py - global methods to access data objects in case of multiple versions.
	- add examples/ex_cspad.py - for test purpose (may be removed later)
	- in PyDetector - add beta-version of sphinx documentation

Tag: V00-00-04
2015-06-02 Mikhail S. Dubrovin
- update ChangeLog

Tag: V00-00-03
2015-06-02 Mikhail S. Dubrovin
- update examples, PyDetector returns None if ndarray size is zero (PSAS-139)

Tag: V00-00-02
2015-05-22 Mikhail S. Dubrovin
- DetectorAccess - add methods ndim(.), size(.), shape(.), status(.). (PSAS-139)
- src/PyDetector.py - return None if calibration parameters are not loaded,
	- add methods ndim(.), size(.), shape(.), status(.), shaped_array(.), return shaped ndarray.
- pyext/pyDetector.cpp - support wrapper for new methods.
- GlobalUtils.py - add enumerated parameters to support CALIB_TYPE and STATUS
- examples/ex_cspad.py -> ex_all_dets.py - switch between derectors by input integer parameter.

2015-05-21 Mikhail S. Dubrovin
- GlobalUtils.py - add enumerated detector types.
- src/DetectorAccess.cpp - make sure that calib parameters loaded before ndarray size is reqested.
- re-name ex_cspad.py -> ex_all_dets.py and update.

2015-05-20 Mikhail S. Dubrovin
- rename examples
- change names and propagation of parameters in PyDetector.py
- add GlobalUtils.py, PyDetectorAccess.py

2015-05-19 Mikhail S. Dubrovin
- Fixed problems with imports.

Tag: V00-00-01
2015-05-18 Mikhail S. Dubrovin
- Package pytopsana was re-named to Detector (PSAS-139)

#------------------------------
Chris & Ankush stuff:
addpkg psana_python HEAD    (boost converters)
addpkg -u pyAreaDet
#------------------------------
