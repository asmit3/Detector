
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Detector documentation &#8212; Detector-doc 1 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="#">Detector-doc 1 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="detector-documentation">
<h1>Detector documentation<a class="headerlink" href="#detector-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-PyDetector"></span><div class="section" id="method-detector-factory-in-pydetector-returns-instance-of-the-detector-data-accessor">
<h2>Method <a class="reference internal" href="#PyDetector.detector_factory" title="PyDetector.detector_factory"><code class="xref py py-meth docutils literal"><span class="pre">detector_factory()</span></code></a> in <a class="reference internal" href="#module-PyDetector" title="PyDetector"><code class="xref py py-class docutils literal"><span class="pre">PyDetector</span></code></a> returns instance of the detector data accessor<a class="headerlink" href="#method-detector-factory-in-pydetector-returns-instance-of-the-detector-data-accessor" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Method detector_factory(src,env) switches between detector data access objects depending on source parameter.
Currently implemented detector data access classes:</div></blockquote>
<dl class="docutils">
<dt>See classes</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-AlgoAccess" title="AlgoAccess"><code class="xref py py-class docutils literal"><span class="pre">AlgoAccess</span></code></a></li>
<li><a class="reference internal" href="#module-AreaDetector" title="AreaDetector"><code class="xref py py-class docutils literal"><span class="pre">AreaDetector</span></code></a></li>
<li><a class="reference internal" href="#module-ControlDataDetector" title="ControlDataDetector"><code class="xref py py-class docutils literal"><span class="pre">ControlDataDetector</span></code></a></li>
<li><a class="reference internal" href="#module-DdlDetector" title="DdlDetector"><code class="xref py py-class docutils literal"><span class="pre">DdlDetector</span></code></a>       - access to DDL data</li>
<li><a class="reference internal" href="#module-DetectorTypes" title="DetectorTypes"><code class="xref py py-class docutils literal"><span class="pre">DetectorTypes</span></code></a></li>
<li><a class="reference internal" href="#module-EpicsDetector" title="EpicsDetector"><code class="xref py py-class docutils literal"><span class="pre">EpicsDetector</span></code></a>     - access to EPICS data</li>
<li><a class="reference internal" href="#module-EvrDetector" title="EvrDetector"><code class="xref py py-class docutils literal"><span class="pre">EvrDetector</span></code></a>       - access to EVR data</li>
<li><a class="reference internal" href="#module-Generic1DDetector" title="Generic1DDetector"><code class="xref py py-class docutils literal"><span class="pre">Generic1DDetector</span></code></a></li>
<li><a class="reference internal" href="#module-GenericWFDetector" title="GenericWFDetector"><code class="xref py py-class docutils literal"><span class="pre">GenericWFDetector</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-IpimbDetector" title="IpimbDetector"><code class="xref py py-class docutils literal"><span class="pre">IpimbDetector</span></code></a></li>
<li><a class="reference internal" href="#module-OceanDetector" title="OceanDetector"><code class="xref py py-class docutils literal"><span class="pre">OceanDetector</span></code></a></li>
<li><a class="reference internal" href="#module-PyDataAccess" title="PyDataAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDataAccess</span></code></a></li>
<li><a class="reference internal" href="#module-PyDetectorAccess" title="PyDetectorAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDetectorAccess</span></code></a>  - Python access interface to data</li>
<li><a class="reference internal" href="#module-PyDetector" title="PyDetector"><code class="xref py py-class docutils literal"><span class="pre">PyDetector</span></code></a>        - factory for different detectors</li>
<li><a class="reference internal" href="#module-TDCDetector" title="TDCDetector"><code class="xref py py-class docutils literal"><span class="pre">TDCDetector</span></code></a></li>
<li><a class="reference internal" href="#module-UsdUsbDetector" title="UsdUsbDetector"><code class="xref py py-class docutils literal"><span class="pre">UsdUsbDetector</span></code></a>    - UsdUsb Encoder Box</li>
<li><a class="reference internal" href="#module-WFDetector" title="WFDetector"><code class="xref py py-class docutils literal"><span class="pre">WFDetector</span></code></a>        - access to waveform detector data</li>
</ul>
</dd>
</dl>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">import</span> <span class="nn">psana</span>

<span class="c1"># Input parameters</span>
<span class="c1"># str object for data source can be defined using DAQ detector name</span>
<span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;XppGon.0:Cspad.0&#39;</span> <span class="c1"># or its alias &#39;cspad&#39;</span>
<span class="c1"># The list of available detector names and alieses for data set can be printed by the command like</span>
<span class="c1"># detnames exp=xpptut15:run=54</span>

<span class="c1"># env object can be defined from data set</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">psana</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="s1">&#39;exp=xpptut15:run=54&#39;</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">env</span><span class="p">()</span>

<span class="c1"># Create detector object</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">psana</span><span class="o">.</span><span class="n">Detector</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>

<span class="c1"># in ipython the list of det methods can be seen using &quot;tab completion&quot; operation - type &quot;det.&quot; and hit the Tab key.</span>
</pre></div>
</div>
<p>This software was developed for the LCLS project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<dl class="class">
<dt id="PyDetector.DetInfo">
<em class="property">class </em><code class="descclassname">PyDetector.</code><code class="descname">DetInfo</code><span class="sig-paren">(</span><em>source_string</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetector.html#DetInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetector.DetInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>A class that provides a consistent string repr for all
detectors, e.g. BldInfo() types that have only a single
name and DetInfo() types that adhere to “.:.” syntax.</p>
<p>If that didn’t mean anything to you, then you don’t
need this class.</p>
<dl class="method">
<dt id="PyDetector.DetInfo.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>source_string</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetector.html#DetInfo.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetector.DetInfo.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpret a string like ‘DetInfo(CxiDs2.0:Cspad.0)’ in terms of:</p>
<p>detector_type –&gt; ‘CxiDs2’
detector_id   –&gt; 0
device_type   –&gt; ‘Cspad’
device_id     –&gt; 0</p>
</dd></dl>

<dl class="attribute">
<dt id="PyDetector.DetInfo.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#PyDetector.DetInfo.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="PyDetector.detector_factory">
<code class="descclassname">PyDetector.</code><code class="descname">detector_factory</code><span class="sig-paren">(</span><em>source_string</em>, <em>env</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetector.html#detector_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetector.detector_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>See psana/src/det_interface.py for documentation</p>
</dd></dl>

<dl class="function">
<dt id="PyDetector.dettype">
<code class="descclassname">PyDetector.</code><code class="descname">dettype</code><span class="sig-paren">(</span><em>source_string</em>, <em>env</em>, <em>accept_missing=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetector.html#dettype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetector.dettype" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a python Detector-class “type” from a string identifier.</p>
<p>Parameters</p>
<ul>
<li><dl class="first docutils">
<dt>source_string <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><dl class="first docutils">
<dt>A string identifying a piece of data to access, examples include:</dt>
<dd><ul class="first last simple">
<li>‘cspad’                  # a DAQ detector alias</li>
<li>‘XppGon.0:Cspad.0’       # a DAQ detector full-name</li>
<li>‘DIAG:FEE1:202:241:Data’ # an EPICS variable name (or alias)</li>
<li>‘EBeam’                  # a BldInfo identifier</li>
</ul>
</dd>
</dl>
<p class="last">The idea is that you should be able to pass something that makes
sense to you as a human here, and you automatically get the right
detector object in return.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>env <span class="classifier-delimiter">:</span> <span class="classifier">psana.Env</span></dt>
<dd><p class="first last">The psana environment object associated with the psana.DataSource
you are interested in (from method DataSource.env()).</p>
</dd>
</dl>
</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>The type of the appropriate detector class</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="PyDetector.map_alias_to_source">
<code class="descclassname">PyDetector.</code><code class="descname">map_alias_to_source</code><span class="sig-paren">(</span><em>source_string</em>, <em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetector.html#map_alias_to_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetector.map_alias_to_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if <cite>source_string</cite> is in the <cite>env</cite> alias map, and if so
use the alias map to look it up and return the psana Source string
corresponding to that alias.</p>
<p>Parameters</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>source_string <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>A string identifying a piece of data to access, examples include:</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>env <span class="classifier-delimiter">:</span> <span class="classifier">psana.Env</span></dt>
<dd>The psana environment object associated with the psana.DataSource
you are interested in (from method DataSource.env()).</dd>
</dl>
</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>source_string <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>De-aliased source string – a unique identifier.</dd>
</dl>
</li>
</ul>
</dd></dl>

</div>
<span class="target" id="module-AreaDetector"></span><div class="section" id="class-areadetector-contains-a-collection-of-access-methods-to-detector-data-and-meta-data">
<h2>Class <a class="reference internal" href="#module-AreaDetector" title="AreaDetector"><code class="xref py py-class docutils literal"><span class="pre">AreaDetector</span></code></a> contains a collection of access methods to detector data and meta-data<a class="headerlink" href="#class-areadetector-contains-a-collection-of-access-methods-to-detector-data-and-meta-data" title="Permalink to this headline">¶</a></h2>
<p>Access method to calibration and geometry parameters, raw data, etc.
Low level implementation is done on C++ or python.</p>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># !!! NOTE: None is returned whenever requested information is missing.</span>

<span class="c1"># import</span>
<span class="kn">import</span> <span class="nn">psana</span>

<span class="c1"># retreive parameters from psana etc.</span>
<span class="n">dsname</span> <span class="o">=</span> <span class="s1">&#39;exp=xpptut15:run=54&#39;</span>
<span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;XppGon.0:Cspad.0&#39;</span> <span class="c1"># or its alias &#39;cspad&#39;</span>

<span class="n">ds</span>  <span class="o">=</span> <span class="n">psana</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">dsname</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">env</span><span class="p">()</span>
<span class="n">evt</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="p">()</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="n">runnum</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="c1"># parameter par can be either runnum or evt    </span>
<span class="n">par</span> <span class="o">=</span> <span class="n">runnum</span> <span class="c1"># or = evt</span>
<span class="n">cmpars</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">91</span><span class="p">)</span> <span class="c1"># custom tuple of common mode parameters</span>

<span class="n">det</span> <span class="o">=</span> <span class="n">psana</span><span class="o">.</span><span class="n">Detector</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>

<span class="c1"># or directly</span>
<span class="kn">from</span> <span class="nn">Detector.AreaDetector</span> <span class="k">import</span> <span class="n">AreaDetector</span>    
<span class="n">det</span> <span class="o">=</span> <span class="n">AreaDetector</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># set parameters, if changed</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_env</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_print_bits</span><span class="p">(</span><span class="n">pbits</span><span class="p">)</span>

<span class="c1"># for Camera type of detector only</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_do_offset</span><span class="p">(</span><span class="n">do_offset</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># NOTE: should be called right after det object is created, before getting data</span>

<span class="c1"># print info</span>
<span class="n">det</span><span class="o">.</span><span class="n">print_attributes</span><span class="p">()</span>    
<span class="n">det</span><span class="o">.</span><span class="n">print_config</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

<span class="c1"># get pixel array shape, size, and nomber of dimensions</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">par</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">size</span>  <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">par</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ndim</span>  <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">ndim</span><span class="p">(</span><span class="n">par</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">instrument</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">instrument</span><span class="p">()</span>

<span class="c1"># access intensity calibration parameters</span>
<span class="n">peds</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">pedestals</span><span class="p">(</span><span class="n">par</span><span class="p">)</span> <span class="c1"># returns array of pixel pedestals from calib store type pedestals</span>
<span class="n">rms</span>    <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">rms</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>       <span class="c1"># returns array of pixel dark noise rms from calib store type pixel_rms</span>
<span class="n">gain</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">gain</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>      <span class="c1"># returns array of pixel gain from calib store type pixel_gain</span>
<span class="n">offset</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>    <span class="c1"># returns array of pixel offset from calib store type pixel_offset</span>
<span class="n">bkgd</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">bkgd</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>      <span class="c1"># returns array of pixel background from calib store type pixel_bkgd</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">status</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>    <span class="c1"># returns array of pixel status from calib store type pixel_status</span>
<span class="n">datast</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">datast</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>    <span class="c1"># returns array of pixel status from calib store type pixel_datast</span>
<span class="n">stmask</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">status_as_mask</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># returns array of masked bad pixels in det.status </span>
                                         <span class="c1"># mode=0/1/2 masks zero/four/eight neighbors around each bad pixel</span>
<span class="n">mask</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">mask_calib</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>  <span class="c1"># returns array of pixel mask from calib store type pixel_mask</span>
<span class="n">cmod</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">common_mode</span><span class="p">(</span><span class="n">par</span><span class="p">)</span> <span class="c1"># returns 1-d array of common mode parameters from calib store type common_mode</span>

<span class="c1"># per-pixel (int16) gain mask from configuration data; 1/0 for low/high gain pixels,</span>
<span class="c1"># or (float) per-pixel gain factors if gain is not None</span>
<span class="n">gmap</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">gain_mask</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># returns array of pixel gains using configuration data</span>
<span class="n">gmnz</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">gain_mask_non_zero</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># returns None if ALL pixels have high gain and mask should not be applied</span>

<span class="c1"># set gfactor=high/low gain factor for CSPAD(2X2) in det.calib and det.image methods</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_gain_mask_factor</span><span class="p">(</span><span class="n">gfactor</span><span class="o">=</span><span class="mf">6.85</span><span class="p">)</span>

<span class="c1"># set flag (for Chuck)</span>
<span class="n">det</span><span class="o">.</span><span class="n">do_reshape_2d_to_3d</span><span class="p">(</span><span class="n">flag</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> 

<span class="c1"># get raw data</span>
<span class="n">nda_raw</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">raw</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

<span class="c1"># get calibrated data (applied corrections: pedestals, common mode, gain mask, gain, pixel status mask)</span>
<span class="n">nda_cdata</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">calib</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
<span class="c1"># and with custom common mode parameter sequence</span>
<span class="n">nda_cdata</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">calib</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">cmpars</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">91</span><span class="p">))</span> <span class="c1"># see description of common mode algorithms in confluence,</span>
<span class="c1"># and with combined mask.</span>
<span class="n">nda_cdata</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">calib</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">mbits</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># see description of det.mask_comb method.</span>

<span class="c1"># common mode correction for pedestal-subtracted numpy array nda:</span>
<span class="n">det</span><span class="o">.</span><span class="n">common_mode_apply</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">nda</span><span class="p">)</span>
<span class="n">cm_corr_nda</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">common_mode_correction</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">nda</span><span class="p">)</span>
<span class="c1"># or with custom common mode parameter sequence</span>
<span class="n">det</span><span class="o">.</span><span class="n">common_mode_apply</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">nda</span><span class="p">,</span> <span class="n">cmpars</span><span class="p">)</span>
<span class="n">cm_corr_nda</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">common_mode_correction</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">nda</span><span class="p">,</span> <span class="n">cmpars</span><span class="p">)</span>

<span class="c1"># access geometry information</span>
<span class="n">geo</span>        <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>   <span class="c1"># returns geometry object (top-most)</span>
<span class="n">cx</span>         <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">coords_x</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>   <span class="c1"># returns array of pixel x coordinates</span>
<span class="n">cy</span>         <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">coords_y</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>   <span class="c1"># returns array of pixel y coordinates</span>
<span class="n">cz</span>         <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">coords_z</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>   <span class="c1"># returns array of pixel z coordinates</span>
<span class="n">cx</span><span class="p">,</span> <span class="n">cy</span>     <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">coords_xy</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>  <span class="c1"># returns arrays of pixel x and y coordinates</span>
<span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">cz</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">coords_xyz</span><span class="p">(</span><span class="n">par</span><span class="p">)</span> <span class="c1"># returns arrays of pixel x, y, and z coordinates</span>
<span class="n">areas</span>      <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">areas</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>      <span class="c1"># returns array of pixel areas relative smallest pixel</span>
<span class="n">mask_geo</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">mask_geo</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">mbits</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># returns mask of segment-specific pixels</span>
                                         <span class="c1">#  mbits = +1-edges; +2-wide central cols;</span>
                                         <span class="c1">#          +4/+8/+16-non-bond / with four / with eight neighbors</span>
                                         <span class="c1"># **kwargs - dict of additional parameters (width=5,...)</span>
<span class="n">ix</span>         <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">indexes_x</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>  <span class="c1"># returns array of pixel indexes along x for image</span>
<span class="n">iy</span>         <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">indexes_y</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>  <span class="c1"># returns array of pixel indexes along y for image</span>
<span class="n">ix</span><span class="p">,</span> <span class="n">iy</span>     <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">indexes_xy</span><span class="p">(</span><span class="n">par</span><span class="p">)</span> <span class="c1"># returns arrays of pixel indexes along x and y for image</span>
<span class="n">pixel_size</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">pixel_size</span><span class="p">(</span><span class="n">par</span><span class="p">)</span> <span class="c1"># returns array of pixel sizes</span>
<span class="n">ipx</span><span class="p">,</span> <span class="n">ipy</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">point_indexes</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">pxy_um</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span> <span class="c1"># by default returns detector origin indexes</span>

<span class="c1"># change geometry object parameters</span>
<span class="n">det</span><span class="o">.</span><span class="n">move_geo</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">)</span>    <span class="c1"># move detector it 3-d space</span>
<span class="n">det</span><span class="o">.</span><span class="n">tilt_geo</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">dtx</span><span class="p">,</span> <span class="n">dty</span><span class="p">,</span> <span class="n">dtz</span><span class="p">)</span> <span class="c1"># tilt detector around 3 axes</span>

<span class="c1"># access to combined mask</span>
<span class="c1"># NOTE: by default none of mask keywords is set to True, returns None.</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">mask</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">calib</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">edges</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">central</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unbond</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unbondnbrs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unbondnbrs8</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="c1"># or cashed mask with mbits - bitword control</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">mask_comb</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">mbits</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="c1"># where mbits has bits for pixel_status, pixel_mask, edges, central, unbond, unbondnbrs, unbondnbrs8, respectively</span>

<span class="c1"># static-mask methods for n-d mask arrays</span>
<span class="n">mask_nbr</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">mask_neighbors</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">allnbrs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># allnbrs=False/True for 4/8 neighbors</span>
<span class="n">mask_edg</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">mask_edges</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">mrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mcols</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># reconstruct image</span>
<span class="n">img</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span> <span class="c1"># uses calib() by default</span>
<span class="n">img</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">img_nda</span><span class="p">)</span>
<span class="n">xaxis</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">image_xaxis</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>
<span class="n">yaxis</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">image_yaxis</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>

<span class="c1"># special case of indexing using non-default pixel scale size and x, y coordinate offset</span>
<span class="n">ix</span>       <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">indexes_x</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="mi">110</span><span class="p">,</span> <span class="n">xy0_off_pix</span><span class="o">=</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1000</span><span class="p">))</span>
<span class="n">iy</span>       <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">indexes_y</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy0_off_pix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">ix</span><span class="p">,</span> <span class="n">iy</span>   <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">indexes_xy</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy0_off_pix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">ipx</span><span class="p">,</span> <span class="n">ipy</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">point_indexes</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">pxy_um</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy0_off_pix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> 
<span class="n">img</span>      <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">img_nda</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy0_off_pix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">xaxis</span>    <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">image_xaxis</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x0_off_pix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">yaxis</span>    <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">image_yaxis</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y0_off_pix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># converting 2-d image to non-assembled array using pixel geometry information.</span>
<span class="c1"># if geometry info is missing - returns None, except the case when flag is set by det.do_reshape_2d_to_3d(True).  </span>
<span class="n">nda</span>      <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">ndarray_from_image</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy0_off_pix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># save n-d numpy array in the text file with metadata (global methods under hood of the class object)</span>
<span class="n">det</span><span class="o">.</span><span class="n">save_txtnda</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s1">&#39;nda.txt&#39;</span><span class="p">,</span> <span class="n">ndarr</span><span class="o">=</span><span class="n">myndarr</span><span class="p">,</span> <span class="n">cmts</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;comment1&#39;</span><span class="p">,</span> <span class="s1">&#39;comment2&#39;</span><span class="p">),</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">verbos</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">addmetad</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># or convenience method for cspad2x2</span>
<span class="n">det</span><span class="o">.</span><span class="n">save_asdaq</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s1">&#39;nda.txt&#39;</span><span class="p">,</span> <span class="n">ndarr</span><span class="o">=</span><span class="n">myndarr</span><span class="p">,</span> <span class="n">cmts</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;comment1&#39;</span><span class="p">,</span> <span class="s1">&#39;comment2&#39;</span><span class="p">),</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">verbos</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">addmetad</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># load n-d numpy array from the text file with metadata</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">load_txtnda</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>

<span class="c1"># merge photons split between pixels and return array with integer number of photons per pixel</span>
<span class="n">nda_nphotons</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">photons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">nda_calib</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">adu_per_photon</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thr_fraction</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See classes</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-AlgoAccess" title="AlgoAccess"><code class="xref py py-class docutils literal"><span class="pre">AlgoAccess</span></code></a></li>
<li><a class="reference internal" href="#module-AreaDetector" title="AreaDetector"><code class="xref py py-class docutils literal"><span class="pre">AreaDetector</span></code></a></li>
<li><a class="reference internal" href="#module-ControlDataDetector" title="ControlDataDetector"><code class="xref py py-class docutils literal"><span class="pre">ControlDataDetector</span></code></a></li>
<li><a class="reference internal" href="#module-DdlDetector" title="DdlDetector"><code class="xref py py-class docutils literal"><span class="pre">DdlDetector</span></code></a>       - access to DDL data</li>
<li><a class="reference internal" href="#module-DetectorTypes" title="DetectorTypes"><code class="xref py py-class docutils literal"><span class="pre">DetectorTypes</span></code></a></li>
<li><a class="reference internal" href="#module-EpicsDetector" title="EpicsDetector"><code class="xref py py-class docutils literal"><span class="pre">EpicsDetector</span></code></a>     - access to EPICS data</li>
<li><a class="reference internal" href="#module-EvrDetector" title="EvrDetector"><code class="xref py py-class docutils literal"><span class="pre">EvrDetector</span></code></a>       - access to EVR data</li>
<li><a class="reference internal" href="#module-Generic1DDetector" title="Generic1DDetector"><code class="xref py py-class docutils literal"><span class="pre">Generic1DDetector</span></code></a></li>
<li><a class="reference internal" href="#module-GenericWFDetector" title="GenericWFDetector"><code class="xref py py-class docutils literal"><span class="pre">GenericWFDetector</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-IpimbDetector" title="IpimbDetector"><code class="xref py py-class docutils literal"><span class="pre">IpimbDetector</span></code></a></li>
<li><a class="reference internal" href="#module-OceanDetector" title="OceanDetector"><code class="xref py py-class docutils literal"><span class="pre">OceanDetector</span></code></a></li>
<li><a class="reference internal" href="#module-PyDataAccess" title="PyDataAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDataAccess</span></code></a></li>
<li><a class="reference internal" href="#module-PyDetectorAccess" title="PyDetectorAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDetectorAccess</span></code></a>  - Python access interface to data</li>
<li><a class="reference internal" href="#module-PyDetector" title="PyDetector"><code class="xref py py-class docutils literal"><span class="pre">PyDetector</span></code></a>        - factory for different detectors</li>
<li><a class="reference internal" href="#module-TDCDetector" title="TDCDetector"><code class="xref py py-class docutils literal"><span class="pre">TDCDetector</span></code></a></li>
<li><a class="reference internal" href="#module-UsdUsbDetector" title="UsdUsbDetector"><code class="xref py py-class docutils literal"><span class="pre">UsdUsbDetector</span></code></a>    - UsdUsb Encoder Box</li>
<li><a class="reference internal" href="#module-WFDetector" title="WFDetector"><code class="xref py py-class docutils literal"><span class="pre">WFDetector</span></code></a>        - access to waveform detector data</li>
</ul>
</dd>
</dl>
<p>This software was developed for the LCLS project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author Mikhail Dubrovin</p>
<dl class="class">
<dt id="AreaDetector.AreaDetector">
<em class="property">class </em><code class="descclassname">AreaDetector.</code><code class="descname">AreaDetector</code><span class="sig-paren">(</span><em>src</em>, <em>env</em>, <em>pbits=0</em>, <em>iface='P'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Python access to area detector data.
Low level access is implemented on python or C++ through the boost::python wrapper</p>
<dl class="method">
<dt id="AreaDetector.AreaDetector.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>src</em>, <em>env</em>, <em>pbits=0</em>, <em>iface='P'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor of the class <a class="reference internal" href="#module-AreaDetector" title="AreaDetector"><code class="xref py py-class docutils literal"><span class="pre">AreaDetector</span></code></a>.</p>
<p>Parameters</p>
<ul class="simple">
<li>src   : str       - data source, e.g. ‘CxiDs2.0:Cspad.0’</li>
<li>env   : psana.Env - environment, e.g. env=ds.env(), where ds=psana.DataSource(‘exp=cxif5315:run=169’)</li>
<li>pbits : int       - print control bit-word</li>
<li>iface : char      - preferable interface: ‘C’ - C++ (everything) or ‘P’ - Python based (everything except common mode)</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="AreaDetector.AreaDetector.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#AreaDetector.AreaDetector.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.areas">
<code class="descname">areas</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.areas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.areas" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of pixel area.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - array of pixel areas.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.bkgd">
<code class="descname">bkgd</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.bkgd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.bkgd" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of background intensities from calib directory.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel values loaded for calibration type pixel_bkgd.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.calib">
<code class="descname">calib</code><span class="sig-paren">(</span><em>evt</em>, <em>cmpars=None</em>, <em>mbits=1</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.calib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.calib" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of calibrated data intensities.</p>
<p>Gets raw data ndarray, applys baic corrections and return thus calibrated data.</p>
<p>Applied corrections:</p>
<ul class="simple">
<li>pedestal subtraction, returns det.raw(evt) if file with pedestals is missing</li>
<li>apply common mode correction</li>
<li>gain_mask or “hybrid” gain from configuration object for CSPAD(2x2) only</li>
<li>gain if pixel_gain calibration file is available</li>
<li>apply mask generated from pixel status (“bad pixels”
from calibration).  Optionally apply other masks if
“mbits” parameter set</li>
</ul>
<p>Parameters</p>
<ul class="simple">
<li>evt    : psana.Event() - psana event object.</li>
<li><dl class="first docutils">
<dt>cmpars <span class="classifier-delimiter">:</span> <span class="classifier">list - common mode parameters, ex.: (1,50,50,100)</span></dt>
<dd>By default uses parameters from calib directory.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>mbits <span class="classifier-delimiter">:</span> <span class="classifier">int - mask control bit-word.  optional.</span></dt>
<dd>defaults to 1.  Bit definitions:<ul class="last">
<li>1  - pixel_status (“bad pixels” deployed by calibman)</li>
<li>2  - pixel_mask (deployed by user in “pixel_mask” calib dir)</li>
<li>4  - edge pixels</li>
<li>8  - big “central” pixels of a cspad2x1</li>
<li>16 - unbonded pixels</li>
<li>32 - unbonded pixel with four neighbors</li>
<li>64 - unbonded pixel with eight neighbors</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel array of calibrated intensities from data.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.calib_data">
<code class="descname">calib_data</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.calib_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.calib_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for depricated method renamed to calib.</p>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.common_mode">
<code class="descname">common_mode</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.common_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.common_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array of common mode correction parameters.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - values loaded for calibration type common_mode.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.common_mode_apply">
<code class="descname">common_mode_apply</code><span class="sig-paren">(</span><em>par</em>, <em>nda</em>, <em>cmpars=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.common_mode_apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.common_mode_apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply common mode correction algorithm.</p>
<p>Apply common mode correction to nda (assuming that nda is data ndarray with subtracted pedestals)
nda.dtype = np.float32 (or 64) is considered only, because common mode does not make sense for int data.
If cmpars is not None then this sequence is used to override default common mode parameters coming from
calib/…/common_mode/…</p>
<p>Parameters</p>
<ul class="simple">
<li>par    : int or psana.Event() - integer run number or psana event object.</li>
<li>nda    : np.array - input: raw data with subtracted pedestals, output: cm corrected data.</li>
<li><dl class="first docutils">
<dt>cmpars <span class="classifier-delimiter">:</span> <span class="classifier">list - common mode parameters, ex.: (1,50,50,100).</span></dt>
<dd>By default uses parameters from calib directory.</dd>
</dl>
</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>I/O parameter nda : np.array - per-pixel corrected intensities.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.common_mode_correction">
<code class="descname">common_mode_correction</code><span class="sig-paren">(</span><em>par</em>, <em>nda</em>, <em>cmpars=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.common_mode_correction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.common_mode_correction" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of common mode correction offsets.</p>
<p>Parameters</p>
<ul class="simple">
<li>par    : int or psana.Event() - integer run number or psana event object.</li>
<li>nda    : np.array - raw data with subtracted pedestals. Input data is not modified.</li>
<li><dl class="first docutils">
<dt>cmpars <span class="classifier-delimiter">:</span> <span class="classifier">list - common mode parameters, ex.: (1,50,50,100)</span></dt>
<dd>By default uses parameters from calib directory.</dd>
</dl>
</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel common mode correction offsets.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.coords_x">
<code class="descname">coords_x</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.coords_x"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.coords_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of x coordinates.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - array of pixel x coordinates.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.coords_xy">
<code class="descname">coords_xy</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.coords_xy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.coords_xy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel arrays of x and y coordinates.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - 2 arrays of pixel x and y coordinates, respectively.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.coords_xyz">
<code class="descname">coords_xyz</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.coords_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.coords_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel arrays of x, y, and z coordinates.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - 3 arrays of pixel x, y, and z coordinates, respectively.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.coords_y">
<code class="descname">coords_y</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.coords_y"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.coords_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of y coordinates.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - array of pixel y coordinates.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.coords_z">
<code class="descname">coords_z</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.coords_z"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.coords_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of z coordinates.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - array of pixel z coordinates.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.datast">
<code class="descname">datast</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.datast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.datast" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array of pixel data status from calib directory,
the same as status, but evaluated for non-dark data runs.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>np.array - per-pixel values loaded for calibration type pixel_datast.</dt>
<dd><dl class="first last docutils">
<dt>status bits: 0 - good pixel</dt>
<dd>1,2,4,8,.. TBD</dd>
</dl>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.do_reshape_2d_to_3d">
<code class="descname">do_reshape_2d_to_3d</code><span class="sig-paren">(</span><em>flag=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.do_reshape_2d_to_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.do_reshape_2d_to_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>For Chuck - if flag is True - reshape 2-d arrays to 3-d.</p>
<p>Parameters</p>
<ul class="simple">
<li>flag : bool - False(def)/True</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.gain">
<code class="descname">gain</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.gain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.gain" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of gain factors from calib directory.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel values loaded for calibration type pixel_gain.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.gain_mask">
<code class="descname">gain_mask</code><span class="sig-paren">(</span><em>par</em>, <em>gain=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.gain_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.gain_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array with gain mask evaluated from detector configuration data.</p>
<p>Parameter</p>
<ul class="simple">
<li>par  : int or psana.Event() - integer run number or psana event object.</li>
<li>gain : float - gain factor; mask will be multiplied by this factor if it is specified.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel gain mask; (int16) 1/0 or (float) gain/1 for low/high gain pixels.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.gain_mask_non_zero">
<code class="descname">gain_mask_non_zero</code><span class="sig-paren">(</span><em>par</em>, <em>gain=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.gain_mask_non_zero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.gain_mask_non_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>The same as gain_mask, but return None if ALL pixels have high gain.</p>
<p>Parameter</p>
<ul class="simple">
<li>par  : int or psana.Event() - integer run number or psana event object.</li>
<li>gain : float - gain factor; mask will be multiplied by this factor if it is specified.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel gain mask; (int16) 1/0 or (float) gain/1 for low/high gain pixels.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.geometry">
<code class="descname">geometry</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.geometry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.geometry" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns detector geometry object.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : psana.Event() | int - psana event object or run number</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>PSCalib.GeometryAccess - detector geometry object.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.image">
<code class="descname">image</code><span class="sig-paren">(</span><em>evt</em>, <em>nda_in=None</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.image" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns 2-d array of intensities for imaging.</p>
<p>Parameters</p>
<ul class="simple">
<li>evt               : psana.Event() - psana event object.</li>
<li>nda_in            : input n-d array which needs to be converted in image; default - use calib methood.</li>
<li>pix_scale_size_um : float - pixel scale size [um] which is used to convert coordinate in index.</li>
<li>xy0_off_pix       : list of floats - image (x,y) origin offset in order to make all indexes positively defined.</li>
<li>do_update         : bool - force to update cached array.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - 2-d array of intensities for imaging.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.image_xaxis">
<code class="descname">image_xaxis</code><span class="sig-paren">(</span><em>par</em>, <em>pix_scale_size_um=None</em>, <em>x0_off_pix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.image_xaxis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.image_xaxis" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array of pixel x coordinates associated with image x-y grid.</p>
<p>Parameters</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
<li>pix_scale_size_um : float - pixel scale size [um] which is used to convert coordinate in index.</li>
<li>x0_off_pix        : float - origin x coordinate offset in number of pixels</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - array of pixel x coordinates of image x-y grid.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.image_yaxis">
<code class="descname">image_yaxis</code><span class="sig-paren">(</span><em>par</em>, <em>pix_scale_size_um=None</em>, <em>y0_off_pix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.image_yaxis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.image_yaxis" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array of pixel x coordinates associated with image x-y grid.</p>
<p>Parameters</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
<li>pix_scale_size_um : float - pixel scale size [um] which is used to convert coordinate in index.</li>
<li>y0_off_pix        : float - origin y coordinate offset in number of pixels</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - array of pixel y coordinates of image x-y grid.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.indexes_x">
<code class="descname">indexes_x</code><span class="sig-paren">(</span><em>par</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.indexes_x"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.indexes_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array of pixel integer x indexes.</p>
<p>Parameters</p>
<ul class="simple">
<li>par               : int or psana.Event() - integer run number or psana event object.</li>
<li>pix_scale_size_um : float - pixel scale size [um] which is used to convert coordinate in index.</li>
<li>xy0_off_pix       : list of floats - image (x,y) origin offset in order to make all indexes positively defined.</li>
<li>do_update         : bool - force to update cached array.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - array of pixel x indexes.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.indexes_xy">
<code class="descname">indexes_xy</code><span class="sig-paren">(</span><em>par</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.indexes_xy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.indexes_xy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns two arrays of pixel integer x and y indexes.</p>
<p>Parameters</p>
<ul class="simple">
<li>par               : int or psana.Event() - integer run number or psana event object.</li>
<li>pix_scale_size_um : float - pixel scale size [um] which is used to convert coordinate in index.</li>
<li>xy0_off_pix       : list of floats - image (x,y) origin offset in order to make all indexes positively defined.</li>
<li>do_update         : bool - force to update cached array.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>(np.array, np.array) - list of two arrays of pixel x and y indexes, respectively.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.indexes_y">
<code class="descname">indexes_y</code><span class="sig-paren">(</span><em>par</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.indexes_y"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.indexes_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array of pixel integer y indexes.</p>
<p>Parameters</p>
<ul class="simple">
<li>par               : int or psana.Event() - integer run number or psana event object.</li>
<li>pix_scale_size_um : float - pixel scale size [um] which is used to convert coordinate in index.</li>
<li>xy0_off_pix       : list of floats - image (x,y) origin offset in order to make all indexes positively defined.</li>
<li>do_update         : bool - force to update cached array.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - array of pixel y indexes.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.instrument">
<code class="descname">instrument</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.instrument"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.instrument" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns name of instrument.</p>
<p>Returns</p>
<ul class="simple">
<li>str - name of instrument, ex.: ‘AMO’, ‘XPP’, ‘SXR’, ‘CXI, ‘MEC’, ‘XCS’, etc.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.is_cspad">
<code class="descname">is_cspad</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.is_cspad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.is_cspad" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (bool) True/False for CSPAD/other detector type</p>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.is_cspad2x2">
<code class="descname">is_cspad2x2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.is_cspad2x2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.is_cspad2x2" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (bool) True/False for CSPAD2x2/other detector type</p>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.is_jungfrau">
<code class="descname">is_jungfrau</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.is_jungfrau"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.is_jungfrau" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (bool) True/False for jungfrau/other detector type</p>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.load_txtnda">
<code class="descname">load_txtnda</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.load_txtnda"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.load_txtnda" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns n-d array loaded from specified formatted text file.</p>
<p>Parameters</p>
<ul class="simple">
<li>fname : str - input file name.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>np.array - array with values loaded from file,</dt>
<dd>shaped in accordance with metadata (if available).
If metadata is missing, output array will have 2- or 1-d shape;
spaces and &lt;next-lene&gt; characters in the text file are used to find the shape of the array.</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.loading_status">
<code class="descname">loading_status</code><span class="sig-paren">(</span><em>par</em>, <em>calibtype=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.loading_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.loading_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns loading status of calibration constants of specified type.</p>
<p>Parameters</p>
<ul class="simple">
<li>rnum      : int - run number</li>
<li><dl class="first docutils">
<dt>calibtype <span class="classifier-delimiter">:</span> <span class="classifier">int - enumerated value from the list</span></dt>
<dd>gu.PEDESTALS, PIXEL_STATUS, PIXEL_RMS, PIXEL_GAIN, PIXEL_MASK, PIXEL_BKGD, COMMON_MODE.</dd>
</dl>
</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>int - enumerated value from the list gu.LOADED, DEFAULT, UNREADABLE, UNDEFINED, WRONGSIZE, NONFOUND.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.mask">
<code class="descname">mask</code><span class="sig-paren">(</span><em>par</em>, <em>calib=False</em>, <em>status=False</em>, <em>edges=False</em>, <em>central=False</em>, <em>unbond=False</em>, <em>unbondnbrs=False</em>, <em>unbondnbrs8=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array with mask values (per-pixel product of all requested masks).</p>
<p>Parameters</p>
<ul class="simple">
<li>par     : int or psana.Event() - integer run number or psana event object.</li>
<li>calib   : bool - True/False = on/off mask from calib directory.</li>
<li>status  : bool - True/False = on/off mask generated from calib pixel_status.</li>
</ul>
<p>Other parameters make sense for cspad 2x1 sensors only:</p>
<ul class="simple">
<li>edges      : bool - True/False = on/off mask of edges.</li>
<li>central    : bool - True/False = on/off mask of two central columns.</li>
<li>unbond     : bool - True/False = on/off mask of unbonded pixels.</li>
<li>unbondnbrs : bool - True/False = on/off mask of unbonded pixel with four neighbors.</li>
<li>unbondnbrs8: bool - True/False = on/off mask of unbonded pixel with eight neighbors.</li>
<li>kwargs     : dict - additional parameters passed to low level methods (width,…)</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel mask values 1/0 for good/bad pixels.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.mask_calib">
<code class="descname">mask_calib</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.mask_calib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.mask_calib" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of mask from calib directory.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel values loaded for calibration type pixel_mask.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.mask_comb">
<code class="descname">mask_comb</code><span class="sig-paren">(</span><em>par</em>, <em>mbits=0</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.mask_comb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.mask_comb" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array with combined mask controlled by mbits bit-word.</p>
<p>This method has same functionality as method mask(…) but under control of a single bit-word mbits.</p>
<p>Parameters</p>
<ul>
<li><p class="first">par   : int or psana.Event() - integer run number or psana event object.</p>
</li>
<li><p class="first">mbits : int - mask control bit-word.</p>
<blockquote>
<div><p>= 0  - returns None
+ 1  - pixel_status (“bad pixels” deployed by calibman)
+ 2  - pixel_mask (deployed by user in “pixel_mask” calib dir)
+ 4  - edge pixels
+ 8  - big “central” pixels of a cspad2x1
+ 16 - unbonded pixels
+ 32 - unbonded pixel with four neighbors
+ 64 - unbonded pixel with eight neighbors</p>
</div></blockquote>
</li>
<li><p class="first">kwargs : dict - additional parameters passed to low level methods (width,…)</p>
</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel mask values 1/0 for good/bad pixels.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.mask_edges">
<code class="descname">mask_edges</code><span class="sig-paren">(</span><em>mask</em>, <em>mrows=1</em>, <em>mcols=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.mask_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.mask_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns n-d array of mask with masked mrows and mcols edges on each 2-d segment.</p>
<p>Parameter</p>
<ul class="simple">
<li>mask  : np.array - input mask of good/bad (1/0) pixels</li>
<li>mrows : int - number of edge rows to mask</li>
<li>mcols : int - number of edge columns to mask</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - mask with masked edges, shape = mask.shape</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.mask_geo">
<code class="descname">mask_geo</code><span class="sig-paren">(</span><em>par</em>, <em>mbits=255</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.mask_geo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.mask_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array with mask controlled by mbits bit-word.</p>
<p>Parameters</p>
<ul>
<li><p class="first">par   : int or psana.Event() - integer run number or psana event object.</p>
</li>
<li><p class="first">mbits : int - mask control bit-word.</p>
<blockquote>
<div><p>= 0 - returns None
+ 1 - edges     
+ 2 - central   
+ 4 - unbond    
+ 8 - unbondnbrs</p>
</div></blockquote>
</li>
<li><p class="first">kwargs     : dict - additional parameters passed to low level methods (width,…)</p>
</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel mask values 1/0 for good/bad pixels.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.mask_neighbors">
<code class="descname">mask_neighbors</code><span class="sig-paren">(</span><em>mask</em>, <em>allnbrs=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.mask_neighbors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.mask_neighbors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns n-d array of mask with masked neighbors on each 2-d segment.</p>
<p>Parameter</p>
<ul class="simple">
<li>mask    : np.array - input mask of good/bad (1/0) pixels</li>
<li>allnbrs : bool - False/True masks 4/8 of neighbors around each bad pixel</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - mask with masked neighbors, shape = mask.shape</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.move_geo">
<code class="descname">move_geo</code><span class="sig-paren">(</span><em>par</em>, <em>dx</em>, <em>dy</em>, <em>dz</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.move_geo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.move_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves detector.</p>
<p>Parameters</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
<li>dx, dy, dz : float - three coordinate increments [um] of the detector motion.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.ndarray_from_image">
<code class="descname">ndarray_from_image</code><span class="sig-paren">(</span><em>par</em>, <em>image</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.ndarray_from_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.ndarray_from_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns n-d array of intensities extracted from image using image bin indexes.</p>
<p>Parameters</p>
<ul class="simple">
<li>par               : int or psana.Event() - integer run number or psana event object.</li>
<li>image             : np.array - input 2-d array which will be converted to n-d array.</li>
<li>pix_scale_size_um : float - pixel scale size [um] which is used to convert coordinate in index.</li>
<li>xy0_off_pix       : list of floats - image (x,y) origin offset in order to make all indexes positively defined.</li>
<li>do_update         : bool - force to update cached array.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - n-d array of intensities made from image.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.ndim">
<code class="descname">ndim</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.ndim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.ndim" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of dimensions of current detector pixel numpy array.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>int - number of dimensions of current detector pixel numpy array. If ndim&gt;3 then returns 3.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.offset">
<code class="descname">offset</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.offset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of offsets from calib directory.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel values loaded for calibration type pixel_offset.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.pedestals">
<code class="descname">pedestals</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.pedestals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.pedestals" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of pedestals (dark run intensities) from calib directory.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel values loaded for calibration type pedestals.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.photons">
<code class="descname">photons</code><span class="sig-paren">(</span><em>evt</em>, <em>nda_calib=None</em>, <em>mask=None</em>, <em>adu_per_photon=None</em>, <em>thr_fraction=0.9</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.photons"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.photons" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns 2-d or 3-d array of integer number of merged photons - algorithm suggested by Chuck.</p>
<p>Parameters</p>
<ul class="simple">
<li>evt            : psana.Event() - psana event object.</li>
<li>nda_calib      : (float, double, int, int16) numpy.array - calibrated data, float number of photons per pixel.</li>
<li>mask           : (uint8) numpy.array user defined mask.</li>
<li>adu_per_photon : float conversion factor which is applied as nda_calib/adu_per_photon.</li>
<li>thr_fraction   : float - fraction of the merged intensity which gets converted to one photon, def=0.9.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - 2-d or 3-d array of integer number of merged photons.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.pixel_size">
<code class="descname">pixel_size</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.pixel_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.pixel_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel scale size in [um].</p>
<p>Parameters</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>float - pixel size in [um].</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.point_indexes">
<code class="descname">point_indexes</code><span class="sig-paren">(</span><em>par</em>, <em>pxy_um=(0</em>, <em>0)</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.point_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.point_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (ix, iy) indexes of the point (x,y) specified in [um].</p>
<p>Parameters</p>
<ul class="simple">
<li>par               : int or psana.Event() - integer run number or psana event object.</li>
<li>pxy_um            : list of two float values - coordinates of the point in the detector frame, default (0,0)</li>
<li>pix_scale_size_um : float - pixel scale size [um] which is used to convert coordinate in index.</li>
<li>xy0_off_pix       : list of floats - image (x,y) origin offset in order to make all indexes positively defined.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>tuple - (ix, iy) tuple of two indexes associated with input point coordinates.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.print_attributes">
<code class="descname">print_attributes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.print_attributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.print_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints some of object attributes.</p>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.print_config">
<code class="descname">print_config</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.print_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.print_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints configuration parameters if available.</p>
<p>Parameter</p>
<ul class="simple">
<li>evt : psana.Event() - psana event object.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.print_members">
<code class="descname">print_members</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.print_members"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.print_members" title="Permalink to this definition">¶</a></dt>
<dd><p>Depricated method renamed to print_attributes()</p>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.raw">
<code class="descname">raw</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.raw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of intensities from raw data.</p>
<p>Parameter</p>
<ul class="simple">
<li>evt : psana.Event() - psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel intensities [ADU] of raw data.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.raw_data">
<code class="descname">raw_data</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.raw_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.raw_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for depricated method renamed to raw(evt)</p>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.rms">
<code class="descname">rms</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.rms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.rms" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of RMS values from calib directory.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - per-pixel values loaded for calibration type pixel_rms.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.runnum">
<code class="descname">runnum</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.runnum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.runnum" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns integer run number from different options of input parameter.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>int - run number or 0 if can’t be defined.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.save_asdaq">
<code class="descname">save_asdaq</code><span class="sig-paren">(</span><em>fname='nda.txt'</em>, <em>ndarr=None</em>, <em>cmts=()</em>, <em>fmt='%.1f'</em>, <em>verbos=False</em>, <em>addmetad=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.save_asdaq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.save_asdaq" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves per-pixel n-d array shaped and ordered as in DAQ.</p>
<p>The same functionality as in the method save_txtnda(…), but array is shuffled to DAQ order. 
Currently re-shuffle pixels for cspad2x2 only from natural shape=(2,185,388) to daq shape (185,388,2).
For all other detectors n-d array is saved unchanged.</p>
<p>Parameters</p>
<ul class="simple">
<li>fname    : str - output file name.</li>
<li>ndarr    : np.array - array of numerical values to save in text file.</li>
<li>cmts     : list of str - list of strings which will be saved as comments in the file header.</li>
<li>fmt      : str - format of values in the file.</li>
<li>verbose  : bool - True/False = on/off messages from this method (about saved file etc.)</li>
<li>addmetad : bool - True/False = on/off saving methadata (data type, and shape info) in file.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.save_txtnda">
<code class="descname">save_txtnda</code><span class="sig-paren">(</span><em>fname='nda.txt'</em>, <em>ndarr=None</em>, <em>cmts=()</em>, <em>fmt='%.1f'</em>, <em>verbos=False</em>, <em>addmetad=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.save_txtnda"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.save_txtnda" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves n-d array in the formatted text file with hash-type cumments and metadata.</p>
<p>Parameters</p>
<ul class="simple">
<li>fname    : str - output file name.</li>
<li>ndarr    : np.array - array of numerical values to save in text file.</li>
<li>cmts     : list of str - list of strings which will be saved as comments in the file header.</li>
<li>fmt      : str - format of values in the file.</li>
<li>verbose  : bool - True/False = on/off messages from this method (about saved file etc.)</li>
<li>addmetad : bool - True/False = on/off saving methadata (data type, and shape info) in file.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.set_do_offset">
<code class="descname">set_do_offset</code><span class="sig-paren">(</span><em>do_offset=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.set_do_offset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.set_do_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch mode of the Camera type of detector.</p>
<p>Parameter</p>
<ul class="simple">
<li>do_offset : bool - control parameter to turn on/off Camera intensity offset, default=False</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.set_env">
<code class="descname">set_env</code><span class="sig-paren">(</span><em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.set_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.set_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets environment variable.</p>
<p>Parameter</p>
<ul class="simple">
<li>env : psana.Env() - psana environment variable, ex.: env=ds.env()</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.set_gain_mask_factor">
<code class="descname">set_gain_mask_factor</code><span class="sig-paren">(</span><em>gfactor=6.85</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.set_gain_mask_factor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.set_gain_mask_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the gain factor which is passed to gain_mask(…) in the det.calib and det.image methods.</p>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.set_print_bits">
<code class="descname">set_print_bits</code><span class="sig-paren">(</span><em>pbits</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.set_print_bits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.set_print_bits" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets print-control bitword.</p>
<p>Parameter</p>
<ul class="simple">
<li>pbits : int - print-control bitword, ex.: 0377 (octal)</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.set_source">
<code class="descname">set_source</code><span class="sig-paren">(</span><em>srcpar</em>, <em>set_sub=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.set_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.set_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets data source parameter.</p>
<p>Parameters</p>
<ul class="simple">
<li>srcpar  : str  - regular source or its alias, ex.: ‘XppEndstation.0:Rayonix.0’ or ‘rayonix’</li>
<li>set_sub : bool - default=True - propagates source parameter to low level package</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.shape">
<code class="descname">shape</code><span class="sig-paren">(</span><em>par=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns shape of the detector pixel-array.</p>
<p>For all detectors except cspad2x2 shape is the same as in DAQ.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - shape of the detector pixel-array, ex. for cspad (32,185,388).</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.size">
<code class="descname">size</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns size of the detector pixel-array.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>int - size of the detector numpy pixel-array (number of pixels)</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.status">
<code class="descname">status</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array of pixel-status from calib directory.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>np.array - per-pixel values loaded for calibration type pixel_status.</dt>
<dd><dl class="first last docutils">
<dt>status bits: 0 - good pixel</dt>
<dd>1 - saturated intensity
2 - hot rms
4 - cold
8 - cold rms</dd>
</dl>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.status_as_mask">
<code class="descname">status_as_mask</code><span class="sig-paren">(</span><em>par</em>, <em>mode=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.status_as_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.status_as_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns per-pixel array of mask generated from pixel_status.</p>
<p>Parameter</p>
<ul class="simple">
<li>par  : int or psana.Event() - integer run number or psana event object.</li>
<li>mode : int - 0/1/2 masks zero/four/eight neighbors around each bad pixel</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - mask generated from calibration type pixel_status (1/0 for status 0/&gt;0, respectively).</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="AreaDetector.AreaDetector.tilt_geo">
<code class="descname">tilt_geo</code><span class="sig-paren">(</span><em>par</em>, <em>dtx</em>, <em>dty</em>, <em>dtz</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/AreaDetector.html#AreaDetector.tilt_geo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AreaDetector.AreaDetector.tilt_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Tilts detector.</p>
<p>Parameters</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
<li>dtx, dty, dtz : float - three angular increments [deg] of the detector tilt.</li>
</ul>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-WFDetector"></span><div class="section" id="class-wfdetector-contains-a-collection-of-access-methods-to-waveform-detector-data">
<h2>Class <a class="reference internal" href="#module-WFDetector" title="WFDetector"><code class="xref py py-class docutils literal"><span class="pre">WFDetector</span></code></a> contains a collection of access methods to waveform detector data<a class="headerlink" href="#class-wfdetector-contains-a-collection-of-access-methods-to-waveform-detector-data" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># !!! NOTE: None is returned whenever requested information is missing.</span>

<span class="c1"># import</span>
<span class="kn">import</span> <span class="nn">psana</span>
<span class="kn">from</span> <span class="nn">Detector.WFDetector</span> <span class="k">import</span> <span class="n">WFDetector</span>    

<span class="c1"># retreive parameters from psana etc.</span>
<span class="n">dsname</span> <span class="o">=</span> <span class="s1">&#39;exp=sxri0414:run=88&#39;</span>
<span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;SxrEndstation.0:Acqiris.2&#39;</span> <span class="c1"># or its alias &#39;acq02&#39;</span>

<span class="n">ds</span>  <span class="o">=</span> <span class="n">psana</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">dsname</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">env</span><span class="p">()</span>
<span class="n">evt</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="p">()</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="n">runnum</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="c1"># parameret par can be either runnum or evt    </span>
<span class="n">par</span> <span class="o">=</span> <span class="n">runnum</span>
<span class="c1"># or</span>
<span class="n">par</span> <span class="o">=</span> <span class="n">evt</span>

<span class="n">det</span> <span class="o">=</span> <span class="n">WFDetector</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">iface</span><span class="o">=</span><span class="s1">&#39;P&#39;</span><span class="p">)</span> <span class="c1"># iface=&#39;P&#39; or &#39;C&#39; - preferable low level interface (not used in this class)</span>

<span class="c1"># set parameters, if changed</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_env</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_print_bits</span><span class="p">(</span><span class="n">pbits</span><span class="p">)</span>

<span class="c1"># print info</span>
<span class="n">det</span><span class="o">.</span><span class="n">print_attributes</span><span class="p">()</span>    
<span class="n">det</span><span class="o">.</span><span class="n">print_config</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

<span class="n">instrument</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">instrument</span><span class="p">()</span>

<span class="c1"># get array with waveforms</span>
<span class="n">wf</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">waveform</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

<span class="c1"># get array with waveform sample times</span>
<span class="n">wt</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">wftime</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

<span class="c1">#--------------------------- </span>
<span class="c1"># Detector-specific methods</span>
<span class="c1">#---------------------------</span>

<span class="c1"># access to Acqiris data</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_correct_acqiris_time</span><span class="p">(</span><span class="n">correct_time</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># (by default)</span>
<span class="n">wf</span><span class="p">,</span> <span class="n">wt</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">raw</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
<span class="c1"># returns two np.array-s with shape = (nbrChannels, nbrSamples) for waveform and associated timestamps or (single) None.</span>

<span class="c1"># access to Imp data</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_calib_imp</span><span class="p">(</span><span class="n">do_calib_imp</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># Imp calibration will subtract base level with changing dtype to np.int32</span>
<span class="n">wf</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">raw</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
<span class="c1"># returns numpy array with shape=(4, 1023) - samples for 4 channels or None if unavailable.</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See classes</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-PyDetector" title="PyDetector"><code class="xref py py-class docutils literal"><span class="pre">PyDetector</span></code></a> - factory for different detectors</li>
<li><a class="reference internal" href="#module-PyDetectorAccess" title="PyDetectorAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDetectorAccess</span></code></a> - Python access interface to data</li>
<li><a class="reference internal" href="#module-AreaDetector" title="AreaDetector"><code class="xref py py-class docutils literal"><span class="pre">AreaDetector</span></code></a>  - access to area detector data</li>
<li><a class="reference internal" href="#module-PyDetector" title="PyDetector"><code class="xref py py-class docutils literal"><span class="pre">PyDetector</span></code></a> - factory for different detectors</li>
<li><a class="reference internal" href="#module-WFDetector" title="WFDetector"><code class="xref py py-class docutils literal"><span class="pre">WFDetector</span></code></a> - access waveform detector data ACQIRIS and IMP</li>
</ul>
</dd>
</dl>
<p>This software was developed for the LCLS project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author Mikhail Dubrovin</p>
<dl class="class">
<dt id="WFDetector.WFDetector">
<em class="property">class </em><code class="descclassname">WFDetector.</code><code class="descname">WFDetector</code><span class="sig-paren">(</span><em>src</em>, <em>env</em>, <em>pbits=0</em>, <em>iface='P'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Python access to wave-form detector data.</p>
<dl class="method">
<dt id="WFDetector.WFDetector.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for self.raw(evt)</p>
</dd></dl>

<dl class="method">
<dt id="WFDetector.WFDetector.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>src</em>, <em>env</em>, <em>pbits=0</em>, <em>iface='P'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameters:
src  [str]       - data source, ex: ‘CxiDs2.0:Cspad.0’
env  [psana.Env] - environment, ex: env=ds.env(), where ds=_psana.DataSource(‘exp=sxri0414:run=88’)
pbits[int]       - print control bit-word
iface[char]      - preferable interface: ‘C’ - C++ (everything) or ‘P’ - Python based (not used in this class)</p>
</dd></dl>

<dl class="method">
<dt id="WFDetector.WFDetector.raw">
<code class="descname">raw</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.raw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector.raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns np.array with raw data</p>
</dd></dl>

<dl class="method">
<dt id="WFDetector.WFDetector.runnum">
<code class="descname">runnum</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.runnum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector.runnum" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns run number for parameter par which can be evt or runnum(int)</p>
</dd></dl>

<dl class="method">
<dt id="WFDetector.WFDetector.set_calib_imp">
<code class="descname">set_calib_imp</code><span class="sig-paren">(</span><em>do_calib_imp=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.set_calib_imp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector.set_calib_imp" title="Permalink to this definition">¶</a></dt>
<dd><p>On/off imp calibration</p>
</dd></dl>

<dl class="method">
<dt id="WFDetector.WFDetector.set_correct_acqiris_time">
<code class="descname">set_correct_acqiris_time</code><span class="sig-paren">(</span><em>correct_time=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.set_correct_acqiris_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector.set_correct_acqiris_time" title="Permalink to this definition">¶</a></dt>
<dd><p>On/off correction of time for acqiris</p>
</dd></dl>

<dl class="method">
<dt id="WFDetector.WFDetector.set_source">
<code class="descname">set_source</code><span class="sig-paren">(</span><em>srcpar</em>, <em>set_sub=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.set_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector.set_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Accepts regular source or alias</p>
</dd></dl>

<dl class="method">
<dt id="WFDetector.WFDetector.waveform">
<code class="descname">waveform</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.waveform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector.waveform" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns np.array with waveforms</p>
</dd></dl>

<dl class="method">
<dt id="WFDetector.WFDetector.wftime">
<code class="descname">wftime</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.wftime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#WFDetector.WFDetector.wftime" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns np.array with waveform sample time</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-DdlDetector"></span><dl class="class">
<dt id="DdlDetector.DdlDetector">
<em class="property">class </em><code class="descclassname">DdlDetector.</code><code class="descname">DdlDetector</code><span class="sig-paren">(</span><em>source</em>, <em>env=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DdlDetector.html#DdlDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DdlDetector.DdlDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This class is a generic wrapper for the DAQ system data
types.  It looks through the event keys for the object that
have the user-specified psana source string.  If there is more
than one, an exception is thrown.</p>
<p>DDL stands for “Data Definition Language” which is a language
that was written for LCLS to express the DAQ data objects in
a language-independent way (i.e. for both python/C++).</p>
<dl class="method">
<dt id="DdlDetector.DdlDetector.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>source</em>, <em>env=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DdlDetector.html#DdlDetector.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DdlDetector.DdlDetector.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>source <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>A psana source string (not a psana.Source object), e.g.
‘DetInfo(CxiDsd.0:Cspad.0)’, ‘BldInfo(FEEGasDetEnergy)’,
or an alias e.g. ‘cspad’.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="DdlDetector.DdlDetector.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#DdlDetector.DdlDetector.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="method">
<dt id="DdlDetector.DdlDetector.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DdlDetector.html#DdlDetector.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DdlDetector.DdlDetector.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Default behavior for detectors who’s special Detector class has not
been implemented.</p>
<p>evt: a psana event object</p>
<p>DAQ object associated with this event</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="DdlDetector.source_is_same">
<code class="descclassname">DdlDetector.</code><code class="descname">source_is_same</code><span class="sig-paren">(</span><em>source1</em>, <em>source2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DdlDetector.html#source_is_same"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DdlDetector.source_is_same" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares strings</p>
</dd></dl>

<span class="target" id="module-AlgoAccess"></span><span class="target" id="module-ControlDataDetector"></span><dl class="class">
<dt id="ControlDataDetector.ControlDataDetector">
<em class="property">class </em><code class="descclassname">ControlDataDetector.</code><code class="descname">ControlDataDetector</code><span class="sig-paren">(</span><em>source_string</em>, <em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ControlDataDetector.html#ControlDataDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ControlDataDetector.ControlDataDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>An object that can be used to query the names/states of
motors used in a DAQ scan.  See PSDM confluence building-block
examples documentation.  Create this object with Detector(‘ControlData’).</p>
<dl class="method">
<dt id="ControlDataDetector.ControlDataDetector.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>evt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ControlDataDetector.html#ControlDataDetector.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ControlDataDetector.ControlDataDetector.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>evt: an (optional) psana Event object.  It is unused in</dt>
<dd>this routine, but provided to make the interface
similar to other</dd>
</dl>
<p>An object that can be used to query the names/states of
motors used in a DAQ scan.  See PSDM confluence building-block
examples documentation.</p>
</dd></dl>

<dl class="method">
<dt id="ControlDataDetector.ControlDataDetector.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>source_string</em>, <em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ControlDataDetector.html#ControlDataDetector.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ControlDataDetector.ControlDataDetector.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>source_string:</dt>
<dd>User must pass string ‘ControlData’ to the Detector constructor</dd>
<dt>env <span class="classifier-delimiter">:</span> <span class="classifier">psana.Env</span></dt>
<dd>The environment, for example from psana.DataSource.env()</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlDataDetector.ControlDataDetector.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#ControlDataDetector.ControlDataDetector.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-DdlDetector"></span><dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">DdlDetector.</code><code class="descname">DdlDetector</code><span class="sig-paren">(</span><em>source</em>, <em>env=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DdlDetector.html#DdlDetector"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This class is a generic wrapper for the DAQ system data
types.  It looks through the event keys for the object that
have the user-specified psana source string.  If there is more
than one, an exception is thrown.</p>
<p>DDL stands for “Data Definition Language” which is a language
that was written for LCLS to express the DAQ data objects in
a language-independent way (i.e. for both python/C++).</p>
<dl class="method">
<dt>
<code class="descname">__init__</code><span class="sig-paren">(</span><em>source</em>, <em>env=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DdlDetector.html#DdlDetector.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="docutils">
<dt>source <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>A psana source string (not a psana.Source object), e.g.
‘DetInfo(CxiDsd.0:Cspad.0)’, ‘BldInfo(FEEGasDetEnergy)’,
or an alias e.g. ‘cspad’.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">__weakref__</code></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DdlDetector.html#DdlDetector.get"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Default behavior for detectors who’s special Detector class has not
been implemented.</p>
<p>evt: a psana event object</p>
<p>DAQ object associated with this event</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="descclassname">DdlDetector.</code><code class="descname">source_is_same</code><span class="sig-paren">(</span><em>source1</em>, <em>source2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DdlDetector.html#source_is_same"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Compares strings</p>
</dd></dl>

<span class="target" id="module-DetectorTypes"></span><p>This file contains static declarations of the known &amp; interpretable detector
types.</p>
<dl class="class">
<dt id="DetectorTypes.MissingDet">
<em class="property">class </em><code class="descclassname">DetectorTypes.</code><code class="descname">MissingDet</code><span class="sig-paren">(</span><em>name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DetectorTypes.html#MissingDet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DetectorTypes.MissingDet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This detector is returned by the Detector interface
when the user requests that the software not crash
when a detector is missing.  It returns a method
that returns None for all attributes.</p>
<dl class="attribute">
<dt id="DetectorTypes.MissingDet.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#DetectorTypes.MissingDet.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-EpicsDetector"></span><dl class="class">
<dt id="EpicsDetector.EpicsDetector">
<em class="property">class </em><code class="descclassname">EpicsDetector.</code><code class="descname">EpicsDetector</code><span class="sig-paren">(</span><em>pv_string</em>, <em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/EpicsDetector.html#EpicsDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EpicsDetector.EpicsDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This class is used to access data that is typically acquired
at a rate slower than the LCLS shot rate (e.g. temperatures,
voltages) using the EPICS slow-control system.</p>
<dl class="method">
<dt id="EpicsDetector.EpicsDetector.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>evt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/EpicsDetector.html#EpicsDetector.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EpicsDetector.EpicsDetector.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>evt: a psana event object</p>
<p>The value of the EPICS variable for the current event. Note
that the argument evt is actually not required, and that
the value you get returned will be for the <em>most recently
accessed</em> event.</p>
</dd></dl>

<dl class="method">
<dt id="EpicsDetector.EpicsDetector.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>pv_string</em>, <em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/EpicsDetector.html#EpicsDetector.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EpicsDetector.EpicsDetector.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>pv_string <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The full-name or alias of an EPICS variable</dd>
<dt>env <span class="classifier-delimiter">:</span> <span class="classifier">psana.Env</span></dt>
<dd>The psana environment, for example from psana.DataSource.env()</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EpicsDetector.EpicsDetector.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#EpicsDetector.EpicsDetector.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-EvrDetector"></span><div class="section" id="detector-interface-for-the-evr">
<h2>Detector interface for the EVR<a class="headerlink" href="#detector-interface-for-the-evr" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="EvrDetector.EvrDetector">
<em class="property">class </em><code class="descclassname">EvrDetector.</code><code class="descname">EvrDetector</code><span class="sig-paren">(</span><em>source</em>, <em>env=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/EvrDetector.html#EvrDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EvrDetector.EvrDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#DdlDetector.DdlDetector" title="DdlDetector.DdlDetector"><code class="xref py py-class docutils literal"><span class="pre">DdlDetector.DdlDetector</span></code></a></p>
<p>The EVR device is used by the DAQ system to control what
happens from shot-to-shot (e.g. which devices are triggered
(e.g. a camera, or a shutter)).  For each event this object provides
a list of “event codes” which can be used to understand which devices
were activated in a particular LCLS event.</p>
<dl class="method">
<dt id="EvrDetector.EvrDetector.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>evt</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/EvrDetector.html#EvrDetector.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EvrDetector.EvrDetector.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>evt: a psana event object</p>
<p>A list of integer event-codes associated with the input event</p>
</dd></dl>

<dl class="method">
<dt id="EvrDetector.EvrDetector.eventCodes">
<code class="descname">eventCodes</code><span class="sig-paren">(</span><em>evt</em>, <em>this_fiducial_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/EvrDetector.html#EvrDetector.eventCodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EvrDetector.EvrDetector.eventCodes" title="Permalink to this definition">¶</a></dt>
<dd><p>evt: a psana event object
this_fiducial_only: bool.</p>
<blockquote>
<div>If true, returns only eventcodes that were sent on precisely
the fiducial corresponding to evt.</div></blockquote>
<p>A list of integer event-codes associated with the input event</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-Generic1DDetector"></span><div class="section" id="detector-interface-for-the-generic1d-type">
<h2>Detector interface for the Generic1D type<a class="headerlink" href="#detector-interface-for-the-generic1d-type" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="Generic1DDetector.Generic1DDetector">
<em class="property">class </em><code class="descclassname">Generic1DDetector.</code><code class="descname">Generic1DDetector</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Generic1DDetector.html#Generic1DDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Generic1DDetector.Generic1DDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#DdlDetector.DdlDetector" title="DdlDetector.DdlDetector"><code class="xref py py-class docutils literal"><span class="pre">DdlDetector.DdlDetector</span></code></a></p>
<dl class="method">
<dt id="Generic1DDetector.Generic1DDetector.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Generic1DDetector.html#Generic1DDetector.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Generic1DDetector.Generic1DDetector.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>evt: a psana event object</p>
<p>A list of of 1D arrays associated with the input event</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-GenericWFDetector"></span><p>Detector interface for the Generic1D type, but specialized for the
case where it represents waveforms with a time axis.  This interface
is intended to be identical to the WFDetector</p>
<dl class="class">
<dt id="GenericWFDetector.GenericWFDetector">
<em class="property">class </em><code class="descclassname">GenericWFDetector.</code><code class="descname">GenericWFDetector</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GenericWFDetector.html#GenericWFDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GenericWFDetector.GenericWFDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#Generic1DDetector.Generic1DDetector" title="Generic1DDetector.Generic1DDetector"><code class="xref py py-class docutils literal"><span class="pre">Generic1DDetector.Generic1DDetector</span></code></a></p>
<p>This class returns a list of arrays of values (one entry
in the list for each channel) and a corresponding list of time arrays
that are used as oscilloscope-style channels.</p>
<dl class="method">
<dt id="GenericWFDetector.GenericWFDetector.raw">
<code class="descname">raw</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GenericWFDetector.html#GenericWFDetector.raw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GenericWFDetector.GenericWFDetector.raw" title="Permalink to this definition">¶</a></dt>
<dd><p>evt: a psana event object</p>
<p>a list of waveform arrays, not converted into voltage</p>
</dd></dl>

<dl class="method">
<dt id="GenericWFDetector.GenericWFDetector.wftime">
<code class="descname">wftime</code><span class="sig-paren">(</span><em>evt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GenericWFDetector.html#GenericWFDetector.wftime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GenericWFDetector.GenericWFDetector.wftime" title="Permalink to this definition">¶</a></dt>
<dd><p>(optional) evt: a psana event object. not used in this method
but allowed to allow the interface similar to other Detector
interface methods</p>
<p>a list of 1D arrays of time values of each sample, in seconds</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-IpimbDetector"></span><div class="section" id="detector-interface-for-the-ipimb">
<h2>Detector interface for the Ipimb<a class="headerlink" href="#detector-interface-for-the-ipimb" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="IpimbDetector.IpimbDetector">
<em class="property">class </em><code class="descclassname">IpimbDetector.</code><code class="descname">IpimbDetector</code><span class="sig-paren">(</span><em>source</em>, <em>env=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/IpimbDetector.html#IpimbDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#IpimbDetector.IpimbDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#DdlDetector.DdlDetector" title="DdlDetector.DdlDetector"><code class="xref py py-class docutils literal"><span class="pre">DdlDetector.DdlDetector</span></code></a></p>
<p>Detector interface for the IPIMB, the which monitors the
beam intensity and position. Methods of note:</p>
<p>– sum
– channel
– xpos
– ypos</p>
<dl class="method">
<dt id="IpimbDetector.IpimbDetector.channel">
<code class="descname">channel</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/IpimbDetector.html#IpimbDetector.channel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#IpimbDetector.IpimbDetector.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the intensities in all channels of the IPIMB.</p>
<dl class="docutils">
<dt>evt <span class="classifier-delimiter">:</span> <span class="classifier">psana.Event</span></dt>
<dd>The event to retrieve data from.</dd>
</dl>
<dl class="docutils">
<dt>channel <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>The intensity of the beam measured in each of four
individual channels. Units arbitrary.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="IpimbDetector.IpimbDetector.sum">
<code class="descname">sum</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/IpimbDetector.html#IpimbDetector.sum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#IpimbDetector.IpimbDetector.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the beam intensity measured by the IPIMB.</p>
<dl class="docutils">
<dt>evt <span class="classifier-delimiter">:</span> <span class="classifier">psana.Event</span></dt>
<dd>The event to retrieve data from.</dd>
</dl>
<dl class="docutils">
<dt>sum <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The sum of the beam intensities in all channels.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="IpimbDetector.IpimbDetector.xpos">
<code class="descname">xpos</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/IpimbDetector.html#IpimbDetector.xpos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#IpimbDetector.IpimbDetector.xpos" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the beam position along the x-axis as measured
by the IPIMB.</p>
<dl class="docutils">
<dt>evt <span class="classifier-delimiter">:</span> <span class="classifier">psana.Event</span></dt>
<dd>The event to retrieve data from.</dd>
</dl>
<dl class="docutils">
<dt>xpos <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The estimated x-position.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="IpimbDetector.IpimbDetector.ypos">
<code class="descname">ypos</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/IpimbDetector.html#IpimbDetector.ypos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#IpimbDetector.IpimbDetector.ypos" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the beam position along the y-axis as measured
by the IPIMB.</p>
<dl class="docutils">
<dt>evt <span class="classifier-delimiter">:</span> <span class="classifier">psana.Event</span></dt>
<dd>The event to retrieve data from.</dd>
</dl>
<dl class="docutils">
<dt>ypos <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The estimated y-position.</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-OceanDetector"></span><div class="section" id="id1">
<h2>Detector interface for the Generic1D type<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="OceanDetector.OceanDetector">
<em class="property">class </em><code class="descclassname">OceanDetector.</code><code class="descname">OceanDetector</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OceanDetector.html#OceanDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OceanDetector.OceanDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#DdlDetector.DdlDetector" title="DdlDetector.DdlDetector"><code class="xref py py-class docutils literal"><span class="pre">DdlDetector.DdlDetector</span></code></a></p>
<dl class="method">
<dt id="OceanDetector.OceanDetector.intensity">
<code class="descname">intensity</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OceanDetector.html#OceanDetector.intensity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OceanDetector.OceanDetector.intensity" title="Permalink to this definition">¶</a></dt>
<dd><p>evt: a psana event object</p>
<p>A 1D array of intensities from the spectrometer, corrected
for non-linearities if possible</p>
</dd></dl>

<dl class="method">
<dt id="OceanDetector.OceanDetector.wavelength">
<code class="descname">wavelength</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/OceanDetector.html#OceanDetector.wavelength"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#OceanDetector.OceanDetector.wavelength" title="Permalink to this definition">¶</a></dt>
<dd><p>evt: a psana event object</p>
<p>A 1D array of wavelength values in nm.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-PyDataAccess"></span><div class="section" id="pydataaccess-contains-methods-to-access-psana-data-objects">
<h2><a class="reference internal" href="#module-PyDataAccess" title="PyDataAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDataAccess</span></code></a> contains methods to access psana data objects<a class="headerlink" href="#pydataaccess-contains-methods-to-access-psana-data-objects" title="Permalink to this headline">¶</a></h2>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created by Mikhail Dubrovin</p>
<dl class="function">
<dt id="PyDataAccess.get_acqiris_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_acqiris_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_acqiris_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_acqiris_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get acqiris config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_acqiris_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_acqiris_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_acqiris_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_acqiris_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get acqiris data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_andor_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_andor_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_andor_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_andor_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get andor config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_andor_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_andor_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_andor_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_andor_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get andor data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_camera_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_camera_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_camera_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_camera_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get camera config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_camera_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_camera_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_camera_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_camera_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get camera data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_cspad2x2_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_cspad2x2_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_cspad2x2_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_cspad2x2_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get cspad2x2 config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_cspad2x2_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_cspad2x2_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_cspad2x2_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_cspad2x2_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get cspad2x2 data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_cspad_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_cspad_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_cspad_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_cspad_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get cspad config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_cspad_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_cspad_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_cspad_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_cspad_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get cspad data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_epicscam_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_epicscam_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_epicscam_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_epicscam_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get epics camera config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_epix_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_epix_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_epix_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_epix_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get epix config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_epix_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_epix_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_epix_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_epix_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get epix data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_evr_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_evr_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_evr_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_evr_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get evr data object for event codes</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_fccd960_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_fccd960_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_fccd960_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_fccd960_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get fccd960 config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_fccd960_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_fccd960_data_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_fccd960_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_fccd960_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get fccd960 data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_fccd_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_fccd_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_fccd_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_fccd_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get fccd config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_fccd_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_fccd_data_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_fccd_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_fccd_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get fccd data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_fli_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_fli_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_fli_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_fli_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get fli config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_fli_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_fli_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_fli_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_fli_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get fli data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_imp_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_imp_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_imp_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_imp_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get imp config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_imp_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_imp_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_imp_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_imp_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get imp data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_jungfrau_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_jungfrau_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_jungfrau_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_jungfrau_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get jungfrau data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_jungfrau_gain_mode_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_jungfrau_gain_mode_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_jungfrau_gain_mode_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_jungfrau_gain_mode_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns gain mode object, usage: gmo=…, gmo.name, gmo.names.iteritems(), gm.values.iteritems(), etc.</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_opal1k_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_opal1k_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_opal1k_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_opal1k_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get camera config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_orca_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_orca_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_orca_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_orca_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get orca config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_pimax_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_pimax_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_pimax_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_pimax_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get pimax config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_pimax_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_pimax_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_pimax_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_pimax_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get pimax data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_pnccd_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_pnccd_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_pnccd_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_pnccd_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get pnccd config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_pnccd_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_pnccd_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_pnccd_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_pnccd_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get pnccd data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_princeton_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_princeton_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_princeton_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_princeton_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get princeton config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_princeton_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_princeton_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_princeton_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_princeton_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get princeton data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_quartz_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_quartz_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_quartz_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_quartz_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get quartz config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_quartz_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_quartz_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_quartz_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_quartz_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get quartz data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_rayonix_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_rayonix_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_rayonix_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_rayonix_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get rayonix config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_rayonix_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_rayonix_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_rayonix_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_rayonix_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get rayonix data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_timepix_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_timepix_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_timepix_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_timepix_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get timepix config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_timepix_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_timepix_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_timepix_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_timepix_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get timepix data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_tm6740_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_tm6740_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_tm6740_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_tm6740_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get pulnix tm6740 config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_zyla_config_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_zyla_config_object</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_zyla_config_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_zyla_config_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get zyla config object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.get_zyla_data_object">
<code class="descclassname">PyDataAccess.</code><code class="descname">get_zyla_data_object</code><span class="sig-paren">(</span><em>evt</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#get_zyla_data_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.get_zyla_data_object" title="Permalink to this definition">¶</a></dt>
<dd><p>get zyla data object</p>
</dd></dl>

<dl class="function">
<dt id="PyDataAccess.time_pars_evt">
<code class="descclassname">PyDataAccess.</code><code class="descname">time_pars_evt</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDataAccess.html#time_pars_evt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDataAccess.time_pars_evt" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns time parameters from psana.Event object.</p>
<p>Parameter
- evt (psana.Event) - psana event object</p>
<p>Returns tuple of the event time parameters:</p>
<ul class="simple">
<li>tsec (int) - time in sec since 1970</li>
<li>tnsec (int) - time in nanosecond</li>
<li>fid (uint16) - fiducials</li>
<li>date (str) - date in format YYYY-MM-DD</li>
<li>time (str) - date in format MM:MM:SS</li>
</ul>
</dd></dl>

</div>
<span class="target" id="module-PyDetectorAccess"></span><div class="section" id="class-pydetectoraccess-contains-a-collection-of-python-access-methods-to-detector-associated-information">
<h2>Class <a class="reference internal" href="#module-PyDetectorAccess" title="PyDetectorAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDetectorAccess</span></code></a> contains a collection of python access methods to detector associated information<a class="headerlink" href="#class-pydetectoraccess-contains-a-collection-of-python-access-methods-to-detector-associated-information" title="Permalink to this headline">¶</a></h2>
<p>Access method to calibration and geometry parameters, raw data, etc.
Low level implementation is done on python.</p>
<dl class="docutils">
<dt>See classes</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-AlgoAccess" title="AlgoAccess"><code class="xref py py-class docutils literal"><span class="pre">AlgoAccess</span></code></a></li>
<li><a class="reference internal" href="#module-AreaDetector" title="AreaDetector"><code class="xref py py-class docutils literal"><span class="pre">AreaDetector</span></code></a></li>
<li><a class="reference internal" href="#module-ControlDataDetector" title="ControlDataDetector"><code class="xref py py-class docutils literal"><span class="pre">ControlDataDetector</span></code></a></li>
<li><a class="reference internal" href="#module-DdlDetector" title="DdlDetector"><code class="xref py py-class docutils literal"><span class="pre">DdlDetector</span></code></a>       - access to DDL data</li>
<li><a class="reference internal" href="#module-DetectorTypes" title="DetectorTypes"><code class="xref py py-class docutils literal"><span class="pre">DetectorTypes</span></code></a></li>
<li><a class="reference internal" href="#module-EpicsDetector" title="EpicsDetector"><code class="xref py py-class docutils literal"><span class="pre">EpicsDetector</span></code></a>     - access to EPICS data</li>
<li><a class="reference internal" href="#module-EvrDetector" title="EvrDetector"><code class="xref py py-class docutils literal"><span class="pre">EvrDetector</span></code></a>       - access to EVR data</li>
<li><a class="reference internal" href="#module-Generic1DDetector" title="Generic1DDetector"><code class="xref py py-class docutils literal"><span class="pre">Generic1DDetector</span></code></a></li>
<li><a class="reference internal" href="#module-GenericWFDetector" title="GenericWFDetector"><code class="xref py py-class docutils literal"><span class="pre">GenericWFDetector</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-IpimbDetector" title="IpimbDetector"><code class="xref py py-class docutils literal"><span class="pre">IpimbDetector</span></code></a></li>
<li><a class="reference internal" href="#module-OceanDetector" title="OceanDetector"><code class="xref py py-class docutils literal"><span class="pre">OceanDetector</span></code></a></li>
<li><a class="reference internal" href="#module-PyDataAccess" title="PyDataAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDataAccess</span></code></a></li>
<li><a class="reference internal" href="#module-PyDetectorAccess" title="PyDetectorAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDetectorAccess</span></code></a>  - Python access interface to data</li>
<li><a class="reference internal" href="#module-PyDetector" title="PyDetector"><code class="xref py py-class docutils literal"><span class="pre">PyDetector</span></code></a>        - factory for different detectors</li>
<li><a class="reference internal" href="#module-TDCDetector" title="TDCDetector"><code class="xref py py-class docutils literal"><span class="pre">TDCDetector</span></code></a></li>
<li><a class="reference internal" href="#module-UsdUsbDetector" title="UsdUsbDetector"><code class="xref py py-class docutils literal"><span class="pre">UsdUsbDetector</span></code></a>    - UsdUsb Encoder Box</li>
<li><a class="reference internal" href="#module-WFDetector" title="WFDetector"><code class="xref py py-class docutils literal"><span class="pre">WFDetector</span></code></a>        - access to waveform detector dataSee classes</li>
</ul>
</dd>
</dl>
<p>This software was developed for the LCLS project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author Mikhail Dubrovin</p>
<dl class="class">
<dt id="PyDetectorAccess.PyDetectorAccess">
<em class="property">class </em><code class="descclassname">PyDetectorAccess.</code><code class="descname">PyDetectorAccess</code><span class="sig-paren">(</span><em>source</em>, <em>env</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess" title="Permalink to this definition">¶</a></dt>
<dd><p>Class <a class="reference internal" href="#module-PyDetectorAccess" title="PyDetectorAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDetectorAccess</span></code></a> - python access to detector data.</p>
<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>source</em>, <em>env</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Class <a class="reference internal" href="#module-PyDetectorAccess" title="PyDetectorAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDetectorAccess</span></code></a> constructor parameters:</p>
<ul class="simple">
<li>source - data source, ex: _psana.Source(‘DetInfo(CxiDs2.0:Cspad.0)’)</li>
<li>env    - environment</li>
<li>pbits  - print control bit-word</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.cspad2x2_gain_mask">
<code class="descname">cspad2x2_gain_mask</code><span class="sig-paren">(</span><em>gain=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.cspad2x2_gain_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.cspad2x2_gain_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the gain mask of 1/0 for low/high gain pixels as a numpy array of shape=(2,185,388), dtype=uint8.
If gain is set, method returns a map of (float) gain/1 values for low/high gain pixels, respectively.
None is returned if configuration data is missing.</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.cspad_gain_mask">
<code class="descname">cspad_gain_mask</code><span class="sig-paren">(</span><em>gain=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.cspad_gain_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.cspad_gain_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the gain mask of 1/0 for low/high gain pixels as a numpy array of shape=(32,185,388), dtype=uint8.
If gain is set, method returns a map of (float) gain/1 values for low/high gain pixels, respectively.
None is returned if configuration data is missing.</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.default_geometry">
<code class="descname">default_geometry</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.default_geometry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.default_geometry" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns default geometry object for some of detectors</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.gain_mask">
<code class="descname">gain_mask</code><span class="sig-paren">(</span><em>par</em>, <em>gain=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.gain_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.gain_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a gain map extracted from detector configuration data.
Currently implemented for CSPAD only.
Returns None for other detectors or missing configuration for CSPAD.</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.gain_mask_non_zero">
<code class="descname">gain_mask_non_zero</code><span class="sig-paren">(</span><em>par</em>, <em>gain=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.gain_mask_non_zero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.gain_mask_non_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>The same as gain_mask, but returns None if ALL pixels have high gain</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.geoaccess">
<code class="descname">geoaccess</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.geoaccess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.geoaccess" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns geometry or None if can’t load.</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.geoaccess_calib">
<code class="descname">geoaccess_calib</code><span class="sig-paren">(</span><em>runnum</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.geoaccess_calib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.geoaccess_calib" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns geometry object from calib store or None if can’t load geometry.</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.geoaccess_dcs">
<code class="descname">geoaccess_dcs</code><span class="sig-paren">(</span><em>tpar</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.geoaccess_dcs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.geoaccess_dcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns geometry object.</p>
<p>Parameter</p>
<ul class="simple">
<li>tpar : _psana.Event | _psana.Env | float time</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>GeometryAccess - geometry object</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.indexes_x">
<code class="descname">indexes_x</code><span class="sig-paren">(</span><em>par</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.indexes_x"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.indexes_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel index array iX.</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.indexes_xy">
<code class="descname">indexes_xy</code><span class="sig-paren">(</span><em>par</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.indexes_xy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.indexes_xy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns two pixel index arrays iX and iY.</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.indexes_y">
<code class="descname">indexes_y</code><span class="sig-paren">(</span><em>par</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.indexes_y"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.indexes_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel index array iY.</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.point_indexes">
<code class="descname">point_indexes</code><span class="sig-paren">(</span><em>par</em>, <em>pxy_um=(0</em>, <em>0)</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.point_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.point_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns ix, iy indexes of the point p_um x,y coordinates in [um]</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.raw_data_acqiris">
<code class="descname">raw_data_acqiris</code><span class="sig-paren">(</span><em>evt</em>, <em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.raw_data_acqiris"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.raw_data_acqiris" title="Permalink to this definition">¶</a></dt>
<dd><p>returns two 2-d ndarrays wf,wt with shape=(nbrChannels, nbrSamples) or None</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.raw_data_imp">
<code class="descname">raw_data_imp</code><span class="sig-paren">(</span><em>evt</em>, <em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.raw_data_imp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.raw_data_imp" title="Permalink to this definition">¶</a></dt>
<dd><p>returns ndarray with shape=(4, 1023) or None</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.runnum">
<code class="descname">runnum</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.runnum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.runnum" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns integer run number from different options of input parameter.</p>
<p>Parameter</p>
<ul class="simple">
<li>par : int or psana.Event() - integer run number or psana event object.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>int - run number or 0 if can’t be defined.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.set_calib_imp">
<code class="descname">set_calib_imp</code><span class="sig-paren">(</span><em>do_calib_imp=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.set_calib_imp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.set_calib_imp" title="Permalink to this definition">¶</a></dt>
<dd><p>On/off imp calibration</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.set_correct_acqiris_time">
<code class="descname">set_correct_acqiris_time</code><span class="sig-paren">(</span><em>correct_time=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.set_correct_acqiris_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.set_correct_acqiris_time" title="Permalink to this definition">¶</a></dt>
<dd><p>On/off correction of time for acqiris</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.set_do_offset">
<code class="descname">set_do_offset</code><span class="sig-paren">(</span><em>do_offset=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.set_do_offset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.set_do_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>On/off application of offset in raw_data_camera(…)</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.shape">
<code class="descname">shape</code><span class="sig-paren">(</span><em>par=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the detector shape.</p>
<p>Shape is retrieved from configuration object and
if it is None, then from calibration file.</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.shape_config_jungfrau">
<code class="descname">shape_config_jungfrau</code><span class="sig-paren">(</span><em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.shape_config_jungfrau"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.shape_config_jungfrau" title="Permalink to this definition">¶</a></dt>
<dd><p>Shape of jungfrau data array. Returns tuple like (nsegs,512,1024)</p>
</dd></dl>

<dl class="method">
<dt id="PyDetectorAccess.PyDetectorAccess.time_par">
<code class="descname">time_par</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyDetectorAccess.html#PyDetectorAccess.time_par"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyDetectorAccess.PyDetectorAccess.time_par" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns parameter which can be used to define dataset time, _psana.Event or _psana.Env.object.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-TDCDetector"></span><p>Detector interface for the TDC type</p>
<dl class="class">
<dt id="TDCDetector.TDCDetector">
<em class="property">class </em><code class="descclassname">TDCDetector.</code><code class="descname">TDCDetector</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/TDCDetector.html#TDCDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#TDCDetector.TDCDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#DdlDetector.DdlDetector" title="DdlDetector.DdlDetector"><code class="xref py py-class docutils literal"><span class="pre">DdlDetector.DdlDetector</span></code></a></p>
<p>Provides access to hit times from a TDC device
with multiple channels.</p>
<dl class="method">
<dt id="TDCDetector.TDCDetector.overflows">
<code class="descname">overflows</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/TDCDetector.html#TDCDetector.overflows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#TDCDetector.TDCDetector.overflows" title="Permalink to this definition">¶</a></dt>
<dd><p>evt: a psana event object</p>
<p>A list of arrays, or None if data not found.  Each array contains
the times (in seconds) of TDC hits for a channel, for cases
where the time value has “wrapped”.</p>
</dd></dl>

<dl class="method">
<dt id="TDCDetector.TDCDetector.times">
<code class="descname">times</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/TDCDetector.html#TDCDetector.times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#TDCDetector.TDCDetector.times" title="Permalink to this definition">¶</a></dt>
<dd><p>evt: a psana event object</p>
<p>A list of arrays, or None if data not found.  Each array contains
the times (in seconds) of TDC hits for a channel.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-UsdUsbDetector"></span><div class="section" id="detector-interface-for-the-usdusb-encoder-box">
<h2>Detector interface for the UsdUsb Encoder Box<a class="headerlink" href="#detector-interface-for-the-usdusb-encoder-box" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="UsdUsbDetector.UsdUsbDetector">
<em class="property">class </em><code class="descclassname">UsdUsbDetector.</code><code class="descname">UsdUsbDetector</code><span class="sig-paren">(</span><em>source</em>, <em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/UsdUsbDetector.html#UsdUsbDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UsdUsbDetector.UsdUsbDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#DdlDetector.DdlDetector" title="DdlDetector.DdlDetector"><code class="xref py py-class docutils literal"><span class="pre">DdlDetector.DdlDetector</span></code></a></p>
<p>Detector interface for the USDUSB encoder box, the which
monitors the encoder counts of a device. Methods of note:</p>
<p>– descriptions - user defined descriptions of each channel
– values</p>
<dl class="method">
<dt id="UsdUsbDetector.UsdUsbDetector.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>source</em>, <em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/UsdUsbDetector.html#UsdUsbDetector.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UsdUsbDetector.UsdUsbDetector.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>source <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>A psana source string (not a psana.Source object), e.g.
‘DetInfo(CxiDsd.0:Cspad.0)’, ‘BldInfo(FEEGasDetEnergy)’,
or an alias e.g. ‘cspad’.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="UsdUsbDetector.UsdUsbDetector.descriptions">
<code class="descname">descriptions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/UsdUsbDetector.html#UsdUsbDetector.descriptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UsdUsbDetector.UsdUsbDetector.descriptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the description field for all channels of the USDUSB.</p>
<dl class="docutils">
<dt>descriptions <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>Description string for each of the four individual channels.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="UsdUsbDetector.UsdUsbDetector.values">
<code class="descname">values</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/UsdUsbDetector.html#UsdUsbDetector.values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UsdUsbDetector.UsdUsbDetector.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the calibrated encoder values in all channels of the USDSUB
if available. If no calibrated values are available it returns the
raw encoder counts.</p>
<dl class="docutils">
<dt>The calibrated value is calculated for each channel as follows:</dt>
<dd>value = scale * (raw_count + offset)</dd>
</dl>
<p>The scale and offset values can be retrieved from the configStore.</p>
<dl class="docutils">
<dt>evt <span class="classifier-delimiter">:</span> <span class="classifier">psana.Event</span></dt>
<dd>The event to retrieve data from.</dd>
</dl>
<dl class="docutils">
<dt>values <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>The calibrated encoder value measured in each of the four
individual channels. Units depend on chosen calibration.</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-WFDetector"></span><div class="section" id="id2">
<h2>Class <a class="reference internal" href="#module-WFDetector" title="WFDetector"><code class="xref py py-class docutils literal"><span class="pre">WFDetector</span></code></a> contains a collection of access methods to waveform detector data<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># !!! NOTE: None is returned whenever requested information is missing.</span>

<span class="c1"># import</span>
<span class="kn">import</span> <span class="nn">psana</span>
<span class="kn">from</span> <span class="nn">Detector.WFDetector</span> <span class="k">import</span> <span class="n">WFDetector</span>    

<span class="c1"># retreive parameters from psana etc.</span>
<span class="n">dsname</span> <span class="o">=</span> <span class="s1">&#39;exp=sxri0414:run=88&#39;</span>
<span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;SxrEndstation.0:Acqiris.2&#39;</span> <span class="c1"># or its alias &#39;acq02&#39;</span>

<span class="n">ds</span>  <span class="o">=</span> <span class="n">psana</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">dsname</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">env</span><span class="p">()</span>
<span class="n">evt</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="p">()</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="n">runnum</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="c1"># parameret par can be either runnum or evt    </span>
<span class="n">par</span> <span class="o">=</span> <span class="n">runnum</span>
<span class="c1"># or</span>
<span class="n">par</span> <span class="o">=</span> <span class="n">evt</span>

<span class="n">det</span> <span class="o">=</span> <span class="n">WFDetector</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">iface</span><span class="o">=</span><span class="s1">&#39;P&#39;</span><span class="p">)</span> <span class="c1"># iface=&#39;P&#39; or &#39;C&#39; - preferable low level interface (not used in this class)</span>

<span class="c1"># set parameters, if changed</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_env</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_print_bits</span><span class="p">(</span><span class="n">pbits</span><span class="p">)</span>

<span class="c1"># print info</span>
<span class="n">det</span><span class="o">.</span><span class="n">print_attributes</span><span class="p">()</span>    
<span class="n">det</span><span class="o">.</span><span class="n">print_config</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

<span class="n">instrument</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">instrument</span><span class="p">()</span>

<span class="c1"># get array with waveforms</span>
<span class="n">wf</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">waveform</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

<span class="c1"># get array with waveform sample times</span>
<span class="n">wt</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">wftime</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

<span class="c1">#--------------------------- </span>
<span class="c1"># Detector-specific methods</span>
<span class="c1">#---------------------------</span>

<span class="c1"># access to Acqiris data</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_correct_acqiris_time</span><span class="p">(</span><span class="n">correct_time</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># (by default)</span>
<span class="n">wf</span><span class="p">,</span> <span class="n">wt</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">raw</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
<span class="c1"># returns two np.array-s with shape = (nbrChannels, nbrSamples) for waveform and associated timestamps or (single) None.</span>

<span class="c1"># access to Imp data</span>
<span class="n">det</span><span class="o">.</span><span class="n">set_calib_imp</span><span class="p">(</span><span class="n">do_calib_imp</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># Imp calibration will subtract base level with changing dtype to np.int32</span>
<span class="n">wf</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">raw</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
<span class="c1"># returns numpy array with shape=(4, 1023) - samples for 4 channels or None if unavailable.</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See classes</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-PyDetector" title="PyDetector"><code class="xref py py-class docutils literal"><span class="pre">PyDetector</span></code></a> - factory for different detectors</li>
<li><a class="reference internal" href="#module-PyDetectorAccess" title="PyDetectorAccess"><code class="xref py py-class docutils literal"><span class="pre">PyDetectorAccess</span></code></a> - Python access interface to data</li>
<li><a class="reference internal" href="#module-AreaDetector" title="AreaDetector"><code class="xref py py-class docutils literal"><span class="pre">AreaDetector</span></code></a>  - access to area detector data</li>
<li><a class="reference internal" href="#module-PyDetector" title="PyDetector"><code class="xref py py-class docutils literal"><span class="pre">PyDetector</span></code></a> - factory for different detectors</li>
<li><a class="reference internal" href="#module-WFDetector" title="WFDetector"><code class="xref py py-class docutils literal"><span class="pre">WFDetector</span></code></a> - access waveform detector data ACQIRIS and IMP</li>
</ul>
</dd>
</dl>
<p>This software was developed for the LCLS project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author Mikhail Dubrovin</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">WFDetector.</code><code class="descname">WFDetector</code><span class="sig-paren">(</span><em>src</em>, <em>env</em>, <em>pbits=0</em>, <em>iface='P'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Python access to wave-form detector data.</p>
<dl class="method">
<dt>
<code class="descname">__call__</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.__call__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Alias for self.raw(evt)</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">__init__</code><span class="sig-paren">(</span><em>src</em>, <em>env</em>, <em>pbits=0</em>, <em>iface='P'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Parameters:
src  [str]       - data source, ex: ‘CxiDs2.0:Cspad.0’
env  [psana.Env] - environment, ex: env=ds.env(), where ds=_psana.DataSource(‘exp=sxri0414:run=88’)
pbits[int]       - print control bit-word
iface[char]      - preferable interface: ‘C’ - C++ (everything) or ‘P’ - Python based (not used in this class)</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">raw</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.raw"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns np.array with raw data</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">runnum</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.runnum"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns run number for parameter par which can be evt or runnum(int)</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">set_calib_imp</code><span class="sig-paren">(</span><em>do_calib_imp=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.set_calib_imp"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>On/off imp calibration</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">set_correct_acqiris_time</code><span class="sig-paren">(</span><em>correct_time=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.set_correct_acqiris_time"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>On/off correction of time for acqiris</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">set_source</code><span class="sig-paren">(</span><em>srcpar</em>, <em>set_sub=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.set_source"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Accepts regular source or alias</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">waveform</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.waveform"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns np.array with waveforms</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">wftime</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/WFDetector.html#WFDetector.wftime"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns np.array with waveform sample time</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-GlobalUtils"></span><div class="section" id="globalutils-contains-global-utilities">
<h2><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a> contains global utilities<a class="headerlink" href="#globalutils-contains-global-utilities" title="Permalink to this headline">¶</a></h2>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author Mikhail Dubrovin</p>
<dl class="function">
<dt id="GlobalUtils.divide_protected">
<code class="descclassname">GlobalUtils.</code><code class="descname">divide_protected</code><span class="sig-paren">(</span><em>num</em>, <em>den</em>, <em>vsub_zero=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#divide_protected"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.divide_protected" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns result of devision of numpy arrays num/den with substitution of value vsub_zero for zero den elements.</p>
</dd></dl>

</div>
<span class="target" id="module-EventCodeManager"></span><div class="section" id="eventcodemanager-class-helper-for-event-selection-using-event-code">
<h2><a class="reference internal" href="#module-EventCodeManager" title="EventCodeManager"><code class="xref py py-class docutils literal"><span class="pre">EventCodeManager</span></code></a> class-helper for event selection using event code<a class="headerlink" href="#eventcodemanager-class-helper-for-event-selection-using-event-code" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">Detector.EventCodeManager</span> <span class="k">import</span> <span class="n">EventCodeManager</span>
<span class="n">evcode</span> <span class="o">=</span> <span class="s1">&#39;1,2,4&#39;</span>
<span class="n">ecm</span> <span class="o">=</span> <span class="n">EventCodeManager</span><span class="p">(</span><span class="n">evcode</span><span class="p">,</span> <span class="n">verbos</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">evt</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="p">()</span> <span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ecm</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span> <span class="p">:</span> <span class="k">continue</span> 
</pre></div>
</div>
<dl class="docutils">
<dt>Methods:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#EventCodeManager.EventCodeManager.set_event_codes" title="EventCodeManager.EventCodeManager.set_event_codes"><code class="xref py py-meth docutils literal"><span class="pre">EventCodeManager.set_event_codes()</span></code></a></li>
<li><a class="reference internal" href="#EventCodeManager.EventCodeManager.select" title="EventCodeManager.EventCodeManager.select"><code class="xref py py-meth docutils literal"><span class="pre">EventCodeManager.select()</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the LCLS project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created (moved from app/det_ndarr_raw_proc) on 2017-10-20 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="EventCodeManager.EventCodeManager">
<em class="property">class </em><code class="descclassname">EventCodeManager.</code><code class="descname">EventCodeManager</code><span class="sig-paren">(</span><em>evcode=None</em>, <em>verbos=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/EventCodeManager.html#EventCodeManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EventCodeManager.EventCodeManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Class-helper for event selection using event code.</p>
<p>The string of comma-separated event codes is passed in evcode through option -c, (ex.: -c 1,2,4).
If any of listed event codes are available in evt Evr event codes then method select(evt) returns True, otherwise False.
If any of input event codes is set negative - then all event codes are used to deselect event.  
More complicated logical formulaes are not supprorted.</p>
<dl class="method">
<dt id="EventCodeManager.EventCodeManager.select">
<code class="descname">select</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/EventCodeManager.html#EventCodeManager.select"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EventCodeManager.EventCodeManager.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True/False to select/deselect event.</p>
</dd></dl>

<dl class="method">
<dt id="EventCodeManager.EventCodeManager.set_event_codes">
<code class="descname">set_event_codes</code><span class="sig-paren">(</span><em>evcode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/EventCodeManager.html#EventCodeManager.set_event_codes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EventCodeManager.EventCodeManager.set_event_codes" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits input (str) for list of integer event codes. Any negative event code inverts selection decision for all event codes.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-UtilsJungfrau"></span><div class="section" id="utilsjungfrau-contains-utilities-for-jungfrau-detector-correction">
<h2><a class="reference internal" href="#module-UtilsJungfrau" title="UtilsJungfrau"><code class="xref py py-class docutils literal"><span class="pre">UtilsJungfrau</span></code></a> contains utilities for Jungfrau detector correction<a class="headerlink" href="#utilsjungfrau-contains-utilities-for-jungfrau-detector-correction" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Jungfrau gain range coding
bit: 15,14,…,0   Gain range, ind</p>
<blockquote>
<div>0, 0         Normal,       0
0, 1         ForcedGain1,  1
1, 1         FixedGain2,   2</div></blockquote>
</div></blockquote>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created on 2017-10-03 by Mikhail Dubrovin</p>
<dl class="function">
<dt id="UtilsJungfrau.calib_jungfrau">
<code class="descclassname">UtilsJungfrau.</code><code class="descname">calib_jungfrau</code><span class="sig-paren">(</span><em>det</em>, <em>evt</em>, <em>src</em>, <em>cmpars=(7</em>, <em>3</em>, <em>100)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/UtilsJungfrau.html#calib_jungfrau"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UtilsJungfrau.calib_jungfrau" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns calibrated jungfrau data</p>
<ul class="simple">
<li>gets constants</li>
<li>gets raw data</li>
<li>evaluates (code - pedestal - offset)</li>
<li>applys common mode correction if turned on</li>
<li>apply gain factor</li>
</ul>
<p>Parameters</p>
<ul class="simple">
<li>det (psana.Detector) - Detector object</li>
<li>evt (psana.Event)    - Event object</li>
<li>src (psana.Source)   - Source object</li>
<li><dl class="first docutils">
<dt>cmpars (tuple) - common mode parameters </dt>
<dd><ul class="first last">
<li>cmpars[0] - algorithm # 7-for jungfrau</li>
<li>cmpars[1] - control bit-word 1-in rows, 2-in columns</li>
<li>cmpars[2] - maximal applied correction</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="UtilsJungfrau.common_mode_2d">
<code class="descclassname">UtilsJungfrau.</code><code class="descname">common_mode_2d</code><span class="sig-paren">(</span><em>arr</em>, <em>mask=None</em>, <em>cormax=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/UtilsJungfrau.html#common_mode_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UtilsJungfrau.common_mode_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines and applys common mode correction to entire 2-d arr using the same shape mask.</p>
</dd></dl>

<dl class="function">
<dt id="UtilsJungfrau.common_mode_cols">
<code class="descclassname">UtilsJungfrau.</code><code class="descname">common_mode_cols</code><span class="sig-paren">(</span><em>arr</em>, <em>mask=None</em>, <em>cormax=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/UtilsJungfrau.html#common_mode_cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UtilsJungfrau.common_mode_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines and applys common mode correction to 2-d arr using the same shape mask in loop for cols.</p>
</dd></dl>

<dl class="function">
<dt id="UtilsJungfrau.common_mode_jungfrau">
<code class="descclassname">UtilsJungfrau.</code><code class="descname">common_mode_jungfrau</code><span class="sig-paren">(</span><em>frame</em>, <em>cormax</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/UtilsJungfrau.html#common_mode_jungfrau"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UtilsJungfrau.common_mode_jungfrau" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameters</p>
<ul class="simple">
<li>frame (np.array) - shape=(512, 1024)</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="UtilsJungfrau.common_mode_rows">
<code class="descclassname">UtilsJungfrau.</code><code class="descname">common_mode_rows</code><span class="sig-paren">(</span><em>arr</em>, <em>mask=None</em>, <em>cormax=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/UtilsJungfrau.html#common_mode_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UtilsJungfrau.common_mode_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines and applys common mode correction to 2-d arr using the same shape mask in loop for rows.</p>
</dd></dl>

</div>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          
          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="py-modindex.html" title="Python Module Index"
              >modules</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/index.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Mikhail Dubrovin.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>